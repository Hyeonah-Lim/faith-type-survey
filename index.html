<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>FATI 신앙유형검사 - Faith Attitude Type Indicator</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* 모든 요소에 대한 기본 스타일 초기화 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent; /* 모바일 탭 하이라이트 제거 */
        }
        
        /* CSS 변수 정의 (색상, 배경 등) */
        :root {
            --primary: #5B72EE; /* 주요 색상 */
            --primary-dark: #4A5FDB; /* 주요 색상의 어두운 버전 */
            --secondary: #FF6B9D; /* 보조 색상 (선택된 원형 버튼) */
            --background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* 배경 그라데이션 */
            --text-dark: #2c3e50; /* 어두운 텍스트 색상 */
            --text-light: #495057; /* 밝은 텍스트 색상 */
            --gray-light: #f8f9fa; /* 밝은 회색 */
            --gray-medium: #e9ecef; /* 중간 회색 */
            /* 원형 버튼 크기 변수 */
            --circle-large-size: 60px;
            --circle-small-size: 40px;
        }
        
        /* body 스타일: 전체 페이지 레이아웃 및 폰트 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--background);
            min-height: 100vh;
            min-height: -webkit-fill-available; /* iOS Safari 뷰포트 높이 문제 해결 */
            overflow-x: hidden;
            color: var(--text-dark);
        }
        
        /* 컨테이너: 모바일에서 중앙 정렬 및 최대 너비 설정 */
        .container {
            min-height: 100vh;
            min-height: -webkit-fill-available;
            display: flex;
            flex-direction: column;
        }
        
        /* 시작 화면 스타일 */
        .start-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
            color: white;
            animation: fadeIn 0.5s ease; /* 페이드인 애니메이션 */
        }
        
        /* 페이드인 애니메이션 정의 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .catchphrase {
            font-size: 16px;
            opacity: 0.95;
            margin-bottom: 20px;
            font-style: italic;
            letter-spacing: 0.5px;
        }
        
        .logo {
            font-size: 80px;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite; /* 펄스 애니메이션 */
        }
        
        /* 펄스 애니메이션 정의 */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .start-screen h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .start-screen .english-title {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 25px;
            font-style: italic;
        }
        
        .fati-explanation {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px); /* 블러 효과 */
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: left;
            max-width: 400px;
        }
        
        .fati-explanation h3 {
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .fati-explanation .fati-item {
            margin: 10px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .fati-explanation .fati-item strong {
            color: #FFE66D; /* 강조 색상 */
            font-weight: 600;
        }
        
        .start-btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 18px 60px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .start-btn:active {
            transform: scale(0.95);
        }
        
        /* 검사 화면 스타일 */
        .test-screen {
            display: none; /* 초기에는 숨김 */
            background: white;
            min-height: 100vh;
            animation: slideIn 0.3s ease; /* 슬라이드인 애니메이션 */
        }
        
        /* 슬라이드인 애니메이션 정의 */
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .header {
            background: var(--background);
            padding: 20px;
            padding-top: calc(20px + env(safe-area-inset-top)); /* 노치 디자인 대응 */
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center; /* 진행률 바 중앙 정렬 */
        }
        
        .progress-container {
            background: rgba(255,255,255,0.2);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
            max-width: 400px; /* 진행률 바 최대 너비 제한 */
            margin-left: auto;
            margin-right: auto;
        }
        
        .progress-bar {
            height: 100%;
            background: white;
            border-radius: 3px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        
        .question-container {
            padding: 30px 20px;
            padding-bottom: 120px; /* 하단 네비게이션 버튼 공간 확보 */
            display: flex; /* flex 컨테이너로 설정 */
            flex-direction: column; /* 자식 요소를 세로로 정렬 */
            align-items: center; /* 가로 중앙 정렬 */
            justify-content: center; /* 세로 중앙 정렬 */
            min-height: calc(100vh - 180px); /* 헤더+네비게이션 제외한 최소 높이 */
            text-align: center; /* 내부 텍스트도 중앙 정렬 */
        }
        
        .question-number {
            color: var(--primary);
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 30px;
            color: var(--text-dark);
            text-align: center; /* 질문 텍스트 중앙 정렬 */
            max-width: 90%; /* 너무 길어지지 않도록 */
        }
        
        /* 질문 선택지 레이아웃 수정 (4단계 척도) */
        .options-scale {
            display: flex; /* Flexbox 사용 */
            align-items: center; /* 세로 중앙 정렬 (원과 텍스트 모두) */
            justify-content: space-between; /* 요소 간 균등 분배 */
            gap: 10px; /* 요소 간 간격 */
            flex-wrap: nowrap; /* 기본적으로 줄바꿈 방지 (데스크톱) */
            padding: 0 10px; /* 좌우 패딩 */
            max-width: 600px; /* 너비 제한 */
            margin: 0 auto; /* 중앙 정렬 */
            width: 100%; /* 부모 너비에 맞춤 */
        }

        .options-scale .option-text-wrapper {
            flex-basis: 30%; /* 텍스트 영역이 차지할 공간 (조정 가능) */
            flex-shrink: 1; /* 필요시 줄어들 수 있도록 */
            text-align: center;
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.4;
            display: flex; /* 텍스트를 세로 중앙 정렬하기 위해 flex 사용 */
            align-items: center;
            justify-content: center;
            min-height: var(--circle-large-size); /* 텍스트 영역 최소 높이로 고정 */
        }

        /* 원형 버튼들을 감싸는 새로운 래퍼 */
        .options-scale .circle-wrapper {
            display: flex;
            align-items: center;
            justify-content: center; /* 원형 버튼들을 중앙 정렬 */
            flex-grow: 1; /* 남은 공간을 채우도록 성장 */
            gap: 10px; /* 원형 버튼들 간의 간격 */
        }

        .options-scale .option-circle-container {
            display: flex;
            flex-direction: column; /* 원형 버튼과 텍스트를 세로로 정렬 */
            align-items: center;
            justify-content: center;
            flex-basis: 0; /* 초기 너비 0 */
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            padding: 5px; /* 컨테이너 내부 패딩 */
        }

        .options-scale .option-circle {
            border-radius: 50%;
            background: var(--gray-light);
            border: 2px solid var(--gray-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0; /* 크기 줄어들지 않도록 */
            transition: all 0.2s;
        }

        /* 큰 원형 버튼 스타일 */
        .options-scale .option-circle.large {
            width: var(--circle-large-size);
            height: var(--circle-large-size);
        }

        /* 작은 원형 버튼 스타일 */
        .options-scale .option-circle.small {
            width: var(--circle-small-size);
            height: var(--circle-small-size);
        }

        /* 선택된 옵션 스타일 */
        .options-scale input[type="radio"]:checked + .option-circle-container .option-circle {
            background: var(--secondary); /* 선택 시 색상 */
            border-color: var(--secondary);
            transform: scale(1.1); /* 선택 시 약간 커지게 */
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .options-scale input[type="radio"] {
            display: none; /* 실제 라디오 버튼 숨김 */
        }

        /* 호버 효과 */
        .options-scale .option-circle-container:hover .option-circle {
            background: var(--gray-medium);
        }
        
        .navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            padding-bottom: calc(15px + env(safe-area-inset-bottom)); /* 노치 디자인 대응 */
            box-shadow: 0 -2px 15px rgba(0,0,0,0.1);
            display: flex;
            gap: 12px;
            z-index: 100;
        }
        
        .nav-btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-btn.prev {
            background: var(--gray-medium);
            color: var(--text-light);
        }
        
        .nav-btn.next {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .nav-btn:active:not(:disabled) {
            transform: scale(0.95);
        }
        
        /* 결과 화면 스타일 */
        .result-screen {
            display: none; /* 초기에는 숨김 */
            background: white;
            min-height: 100vh;
            animation: fadeIn 0.5s ease;
        }
        
        .result-header {
            background: var(--background);
            padding: 50px 20px 60px;
            padding-top: calc(50px + env(safe-area-inset-top));
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .result-header::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 60px;
            background: white;
            border-radius: 30px 30px 0 0;
        }
        
        .type-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .type-code {
            font-size: 48px;
            font-weight: 800;
            margin: 15px 0;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .type-emoji {
            font-size: 64px;
            margin: 20px 0;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        
        .type-nickname {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .result-content {
            padding: 40px 20px;
            position: relative;
            z-index: 10;
        }
        
        .card {
            background: var(--gray-light);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .card h3 {
            color: var(--text-dark);
            font-size: 18px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card p {
            color: var(--text-light);
            line-height: 1.7;
            font-size: 15px;
        }
        
        .traits {
            list-style: none;
            margin-top: 15px;
        }
        
        .traits li {
            padding: 12px 0;
            color: var(--text-light);
            font-size: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            border-bottom: 1px solid var(--gray-medium);
        }
        
        .traits li:last-child {
            border-bottom: none;
        }
        
        .traits li::before {
            content: '✨';
            flex-shrink: 0;
        }
        
        .score-visualization {
            background: white;
            border: 2px solid var(--gray-medium);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .score-row {
            margin: 25px 0;
        }
        
        .score-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .score-label {
            color: var(--text-light);
            font-weight: 600;
        }
        
        .score-label.active {
            color: var(--primary);
            font-weight: 700;
        }
        
        .score-bar-container {
            position: relative;
            height: 12px;
            background: var(--gray-medium);
            border-radius: 6px;
            overflow: hidden; /* 바가 밖으로 나가지 않도록 수정 */
        }
        
        .score-bar-center {
            position: absolute;
            left: 50%;
            top: 0; 
            bottom: 0; 
            width: 3px; /* 선 굵기 증가 */
            background: var(--text-dark); /* 선 색상 진하게 */
            opacity: 0.7; /* 선 투명도 증가 */
            z-index: 1;
        }
        
        .score-fill-left {
            position: absolute;
            right: 50%;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 6px 0 0 6px;
            transition: width 1s ease;
        }
        
        .score-fill-right {
            position: absolute;
            left: 50%;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, #764ba2, #667eea);
            border-radius: 0 6px 6px 0;
            transition: width 1s ease;
        }
        
        .actions {
            padding: 20px;
            padding-bottom: calc(30px + env(safe-area-inset-bottom));
        }
        
        .action-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 12px;
        }
        
        .action-btn.primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .action-btn.secondary {
            background: var(--gray-light);
            color: var(--text-light);
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        /* 저작권 정보 */
        .copyright {
            text-align: center;
            padding: 20px;
            color: var(--text-light);
            font-size: 12px;
            background: var(--gray-light);
            line-height: 1.6;
        }
        
        .copyright strong {
            color: var(--text-dark);
        }
        
        /* 로딩 애니메이션 */
        .loading {
            display: none; /* 초기에는 숨김 */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--gray-medium);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* 반응형 디자인: 태블릿 및 데스크톱 */
        @media (min-width: 768px) {
            .container {
                max-width: 600px;
                margin: 0 auto;
                box-shadow: 0 0 50px rgba(0,0,0,0.1);
            }
        }

        /* 모바일 반응형 디자인 (767px 이하) */
        @media (max-width: 767px) {
            .options-scale {
                flex-direction: row; /* 텍스트와 원형 버튼 묶음을 가로로 정렬 */
                align-items: center; /* 세로 중앙 정렬 */
                justify-content: space-between; /* 요소들을 양 끝으로 분산 */
                padding: 0 5px;
                width: 100%;
            }
            
            .options-scale .option-text-wrapper {
                flex: 1; /* 남은 공간을 모두 차지하도록 설정 */
                text-align: center;
                padding: 5px; /* 내부 패딩 추가 */
                min-height: auto; /* 최소 높이 제거 */
                font-size: 13px; /* 폰트 크기 조정 */
            }

            .options-scale .option-text-wrapper.left {
                text-align: left; /* 왼쪽 선지 텍스트 왼쪽 정렬 */
            }

            .options-scale .option-text-wrapper.right {
                text-align: right; /* 오른쪽 선지 텍스트 오른쪽 정렬 */
            }

            .options-scale .circle-wrapper {
                flex: 0 0 auto; /* 크기 유지를 위해 flex-grow, shrink를 0으로 설정 */
                justify-content: center; /* 버튼들을 중앙 정렬 */
                gap: 8px;
            }

            /* 모바일에서 원형 버튼 크기 조정 */
            .options-scale .option-circle.large {
                width: 55px;
                height: 55px;
            }
            .options-scale .option-circle.small {
                width: 35px;
                height: 35px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="start-screen" id="startScreen">
            <div class="catchphrase">나만의 독특한 신앙 스타일을 발견해보세요</div>
            <div class="logo">🙏</div>
            <h1>FATI 신앙유형검사</h1>
            <div class="english-title">Faith Attitude Type Indicator</div>
            
            <div class="fati-explanation">
                <h3>FATI란?</h3>
                <div class="fati-item">
                    <strong>F</strong>ellowship - 공동체 참여 성향 (R/S)
                </div>
                <div class="fati-item">
                    <strong>A</strong>ffection - 신앙 표현 방식 (E/W)
                </div>
                <div class="fati-item">
                    <strong>T</strong>heology - 하나님 인식 방식 (D/P)
                </div>
                <div class="fati-item">
                    <strong>I</strong>ntention - 신앙생활 패턴 (O/F)
                </div>
            </div>
            
            <button class="start-btn" onclick="startTest()">시작하기</button>
            <div style="margin-top: 30px; font-size: 14px; opacity: 0.8;">
                ⏱ 약 5분 소요 | 📝 20문항
            </div>
        </div>
        
        <div class="test-screen" id="testScreen">
            <div class="header">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="questionNumber"></div>
                <div class="question-text" id="questionText"></div>
                <div class="options-scale" id="optionsContainer">
                    </div>
            </div>
            
            <div class="navigation">
                <button class="nav-btn prev" id="prevBtn" onclick="previousQuestion()">이전</button>
                <button class="nav-btn next" id="nextBtn" onclick="nextQuestion()" disabled>다음</button>
            </div>
        </div>
        
        <div class="result-screen" id="resultScreen">
            <div class="result-header">
                <div class="type-badge">당신의 신앙유형</div>
                <div class="type-emoji" id="typeEmoji"></div>
                <div class="type-code" id="typeCode"></div>
                <div class="type-nickname" id="typeNickname"></div>
            </div>
            
            <div class="result-content">
                <div class="card">
                    <h3>📖 유형 설명</h3>
                    <p id="typeDescription"></p>
                </div>
                
                <div class="card">
                    <h3>✨ 주요 특징</h3>
                    <ul class="traits" id="traitsList"></ul>
                </div>
                
                <div class="score-visualization">
                    <h3 style="margin-bottom: 25px; text-align: center;">🎯 상세 분석</h3>
                    <div id="scoreDetails"></div>
                </div>
                
                <div class="card">
                    <h3>💡 성장 포인트</h3>
                    <p id="growthPoint"></p>
                </div>
                
                <div class="card">
                    <h3>🤝 잘 맞는 유형</h3>
                    <p id="compatibility"></p>
                </div>
            </div>
            
            <div class="actions">
                <button class="action-btn primary" onclick="shareResult()">📤 결과 링크 복사하기</button>
                <button class="action-btn secondary" onclick="downloadResultImage()">🖼️ 결과 이미지 다운로드</button>
                <button class="action-btn secondary" onclick="restartTest()">🔄 다시 검사하기</button>
            </div>
            
            <div class="copyright">
                <strong>FATI 신앙유형검사</strong><br>
                Original Idea by <strong>문은성, 송은서</strong><br>
                Developed by <strong>임현아</strong><br>
                © 2025 All rights reserved
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p style="margin-top: 15px; font-weight: 600;">결과를 생성 중입니다...</p>
        </div>
    </div>
    
    <script>
        // 문항 데이터 (사용자 요청에 따라 추가 및 수정)
        const questions = [
            // 공동체 참여 성향 (R/S) - R: 관계 지향, S: 독립 지향
            {
                category: '공동체 참여 성향',
                text: '🎵 성가대 연습에 10분 늦은 당신! 모두가 먼저 와 있고, 당신만 눈치 보며 들어간 상황에서…',
                leftText: '가볍게 사과하고 주변에 자연스럽게 섞이는 편이다.',
                rightText: '누구도 말 안 걸었으면 하고 그냥 묵묵히 앉아있는 편이다.',
                leftType: 'R',
                rightType: 'S'
            },
            {
                category: '공동체 참여 성향',
                text: '🙋 청년부에 새로 온 지체가 혼자 앉아있다.',
                leftText: '반가운 마음으로 먼저 다가가 말을 건넨다.',
                rightText: '어색해서 다가가긴 어렵지만 조용히 관심을 갖고 기회가 되면 개인적으로 대화한다.',
                leftType: 'R',
                rightType: 'S'
            },
            {
                category: '공동체 참여 성향',
                text: '📆 수련회에 참석하게 된 당신, 가장 기대하는 것은?',
                leftText: '많은 사람들과 함께 뜨거운 예배를 드리는 것',
                rightText: '혼자만의 시간에 뜨겁게 기도하는 것',
                leftType: 'R',
                rightType: 'S'
            },
            {
                category: '공동체 참여 성향',
                text: '🧠 신앙적인 고민이 깊어진 시기, 당신은?',
                leftText: '신앙 친구들과 나누며 함께 기도한다.',
                rightText: '혼자 하나님께 기도하며 답을 구한다.',
                leftType: 'R',
                rightType: 'S'
            },
            { // R/S Q5 추가
                category: '공동체 참여 성향',
                text: '❓ 교회 재정이나 헌금에 대해 내 마음은?',
                leftText: '공동체가 함께 사용하는 것이라 기꺼이 나누고 싶은 마음이다.',
                rightText: '조용히 하나님 앞에서 결정하고 헌금은 개인적인 헌신이라고 생각한다.',
                leftType: 'R',
                rightType: 'S'
            },
            // 신앙 표현방식 (E/W) - E: 감정/경험 지향, W: 이성/원리 지향
            {
                category: '신앙 표현방식',
                text: '🎤 썸워십에 참석한 당신, 어떤 스타일인가요?', // '찬양집회' -> '썸워십'으로 수정
                leftText: '몸으로 표현하며 감정이 우러나는 찬양을 좋아한다',
                rightText: '가사의 의미를 생각하며 조용히 마음으로 부른다',
                leftType: 'E',
                rightType: 'W'
            },
            {
                category: '신앙 표현방식',
                text: '📖 말씀 듣는 중, 당신의 자세는?',
                leftText: '말씀을 통해 받은 감동과 느낌을 중심으로 정리한다.',
                rightText: '논리적 흐름과 단어의 뜻을 구조적으로 정리한다.',
                leftType: 'E',
                rightType: 'W'
            },
            {
                category: '신앙 표현방식',
                text: '🙏 기도응답을 경험했을 때',
                leftText: '하나님이 살아계심을 느꼈다는 체험에 집중한다.',
                rightText: '하나님의 뜻이 무엇인지 깨달은 것에 집중한다.',
                leftType: 'E',
                rightType: 'W'
            },
            {
                category: '신앙 표현방식',
                text: '💬 수련회 이후, 목장 사람들과 함께 간증 나눔을 하게 된 당신',
                leftText: '하나님을 경험한 순간의 감정과 느낌을 자세히 나눈다',
                rightText: '하나님이 어떤 방법으로 역사하셨는지 사실 중심으로 나눈다',
                leftType: 'E',
                rightType: 'W'
            },
            { // E/W Q5 추가
                category: '신앙 표현방식',
                text: '💰 재정이나 시간의 우선순위를 정할 때 기준은?',
                leftText: '마음속에서 하나님이 주신 감동이나 흐름을 따른다.',
                rightText: '말씀을 통해 배우고 적용한 원칙을 중심으로 판단한다.',
                leftType: 'E',
                rightType: 'W'
            },
            // 하나님 인식방식 (D/P) - D: 관계/친밀함 지향, P: 권위/주권 지향
            {
                category: '하나님 인식방식',
                text: '📖 성경을 읽을 때 가장 먼저 드는 감정은?',
                leftText: '하나님이 내게 말 걸어 주시는 듯한 친밀감을 느끼는 편이다',
                rightText: '하나님의 명령과 기준이 무엇인지 찾는 편이다',
                leftType: 'D',
                rightType: 'P'
            },
            {
                category: '하나님 인식방식',
                text: '🙏 기도할 때, 당신은 하나님을 어떻게 그리는가?',
                leftText: '내가 힘들 때 안아 주시는 따뜻한 분',
                rightText: '내 삶을 판단하고 이끄시는 기준이자 주권자',
                leftType: 'D',
                rightType: 'P'
            },
            {
                category: '하나님 인식방식',
                text: '🧭 믿음의 결정을 내려야 할 때, 당신은?',
                leftText: '마음에 평안이 있는지를 중심으로 분별한다.',
                rightText: '말씀의 기준에 맞는지를 따져본다.',
                leftType: 'D',
                rightType: 'P'
            },
            {
                category: '하나님 인식방식',
                text: '✝️ 신앙생활의 주된 동기는',
                leftText: '하나님과의 더 깊은 사랑의 관계를 위해',
                rightText: '하나님이 기뻐하시는 올바른 삶을 살기 위해',
                leftType: 'D',
                rightType: 'P'
            },
            { // D/P Q5 추가
                category: '하나님 인식방식',
                text: '🙌 하나님께 헌신을 결단할 때, 어떤 마음이 앞서는가?',
                leftText: '하나님께 사랑받고 있다는 감격이 헌신의 원동력이다.',
                rightText: '하나님의 뜻에 순종하는 것이 당연하다는 책임감이 앞선다.',
                leftType: 'D',
                rightType: 'P'
            },
            // 신앙생활 패턴 (O/F) - O: 조직/계획 지향, F: 유연/자유 지향
            {
                category: '신앙생활 패턴',
                text: '📆 수련회 전날 밤, 당신은?',
                leftText: '짐, 일정, 말씀 다 정리하고 기도까지 마친 상태다.',
                rightText: '마음 가는 대로 내일 아침에 짐 싸도 괜찮다.',
                leftType: 'O',
                rightType: 'F'
            },
            {
                category: '신앙생활 패턴',
                text: '📖 성경 읽기를 시작하려는 당신.',
                leftText: '계획표를 세워 하루 분량을 지키려고 노력하는 편이다.',
                rightText: '마음에 끌리는 본문 위주로 자유롭게 읽는 편이다.',
                leftType: 'O',
                rightType: 'F'
            },
            {
                category: '신앙생활 패턴',
                text: '📝 기도제목을 기록하는 방식은?',
                leftText: '날짜별로 정리된 노트나 앱을 사용하는 편이다.',
                rightText: '떠오를 때 간단히 메모하는 편이다.',
                leftType: 'O',
                rightType: 'F'
            },
            {
                category: '신앙생활 패턴',
                text: '신앙생활을 실천하는 나만의 방식은?',
                leftText: '신앙생활은 계획적으로 실천하는 것이 중요하다고 생각한다.',
                rightText: '신앙생활은 흐름에 따라 자연스럽게 이어지는 것이 더 의미 있다고 생각한다.',
                leftType: 'O',
                rightType: 'F'
            },
            { // O/F Q5 추가
                category: '신앙생활 패턴',
                text: '🎁 헌금이나 봉사를 할 때의 나는?',
                leftText: '미리 계획하고 정해둔 방식대로 정기적으로 실천한다.',
                rightText: '마음이 감동되었을 때 자발적으로 드리고 참여하는 편이다.',
                leftType: 'O',
                rightType: 'F'
            }
        ];

        // 각 유형별 결과 설명 (예시, 실제 내용은 더 풍부하게 채울 수 있습니다)
        const resultTypes = {
            // R (관계 지향)
            // R E D O (관계-체험-관계중심-정돈)
            'REDO': {
                emoji: '💖',
                nickname: '사랑 넘치는 공동체 리더',
                description: '당신은 공동체 속에서 사랑과 감정으로 신앙을 표현하며, 하나님과의 친밀한 관계를 통해 삶을 계획하고 실천하는 유형입니다. 사람들과 함께하는 것을 즐기며, 따뜻한 마음으로 공동체를 이끌어갑니다.',
                traits: [
                    '공동체 활동에 적극적으로 참여하고 사람들과의 관계를 중요하게 생각합니다.',
                    '감성적이고 경험을 중시하며, 찬양과 기도를 통해 깊은 감동을 받습니다.',
                    '하나님을 사랑이 많고 친밀한 분으로 인식하며, 그분과의 관계에서 평안을 찾습니다.',
                    '신앙생활을 계획하고 실천하는 데 있어 열정과 감동이 큰 동기가 됩니다.'
                ],
                growth: '때로는 계획을 세우기보다 하나님의 이끄심에 유연하게 반응하는 연습이 필요합니다. 또한, 감정뿐 아니라 말씀의 원리를 깊이 탐구하여 신앙의 균형을 잡는 것이 좋습니다.',
                compatibility: '이성적이고 원리 중심적인 W 유형, 그리고 유연하고 자유로운 F 유형과 잘 맞습니다. 서로의 부족한 부분을 채워주며 함께 성장할 수 있습니다.'
            },
            // R E D F (관계-체험-관계중심-유연)
            'REDF': {
                emoji: '🌊',
                nickname: '자유로운 사랑의 파도',
                description: '당신은 공동체 속에서 사랑을 나누고 감정적으로 신앙을 표현하며, 하나님과의 친밀한 관계 속에서 자유롭게 헌신하는 유형입니다. 사람들과의 교류를 통해 신앙의 기쁨을 얻고, 그 감동을 적극적으로 나눕니다.',
                traits: [
                    '공동체 활동에 적극적으로 참여하고 사람들과의 관계에서 에너지를 얻습니다.',
                    '감성적이고 경험을 중시하며, 찬양과 기도를 통해 깊은 감동을 표현합니다.',
                    '하나님을 사랑이 많고 친밀한 분으로 인식하며, 그분과의 관계에서 삶의 의미를 찾습니다.',
                    '신앙생활을 계획하기보다는 마음의 감동에 따라 자발적으로 실천하고 헌신합니다.'
                ],
                growth: '때로는 감정에 치우쳐 말씀의 원리나 논리적인 이해를 소홀히 할 수 있습니다. 꾸준하고 체계적인 신앙생활을 위해 계획을 세우는 연습도 필요합니다.',
                compatibility: '이성적이고 원리 중심적인 W 유형, 그리고 계획적이고 조직적인 O 유형과 함께할 때 더욱 균형 잡힌 신앙생활을 이룰 수 있습니다.'
            },
            // R E P O (관계-체험-원칙중심-정돈)
            'REPO': {
                emoji: '🌈',
                nickname: '감격의 무지개',
                description: '당신은 공동체 안에서 감정적으로 신앙을 표현하며, 하나님을 원칙 중심적으로 인식하고 계획적인 신앙생활을 하는 유형입니다. 하나님을 향한 열정과 사랑이 공동체 생활의 원동력이 됩니다.',
                traits: [
                    '공동체 모임과 활동에 적극적으로 참여하며, 사람들과의 관계를 중요하게 생각합니다.',
                    '찬양과 예배를 통해 깊은 감동을 느끼고, 이를 신앙의 중요한 경험으로 여깁니다.',
                    '하나님의 주권과 공의를 인정하고, 말씀의 원칙을 따르려고 노력합니다.',
                    '신앙생활의 계획을 세우고 이를 체계적으로 실천하는 것을 중요하게 생각합니다.'
                ],
                growth: '계획대로 되지 않는 상황에서도 하나님의 섭리를 신뢰하며 유연하게 대처하는 연습이 필요합니다. 말씀의 원리뿐만 아니라, 하나님과의 개인적인 친밀한 교제에도 더욱 집중해 보세요.',
                compatibility: '독립적이고 자유로운 S 유형, 그리고 친밀한 관계를 중시하는 D 유형과 함께하면 더 폭넓은 시야를 가질 수 있습니다.'
            },
            // R E P F (관계-체험-원칙중심-유연)
            'REPF': {
                emoji: '🚀',
                nickname: '뜨거운 복음 전도자',
                description: '당신은 공동체 안에서 감정적으로 신앙을 표현하며, 하나님을 원칙 중심적으로 인식하고 자유로운 신앙생활을 하는 유형입니다. 하나님을 향한 뜨거운 마음과 열정으로 공동체에 활기를 불어넣는 역할을 합니다.',
                traits: [
                    '공동체와 함께하는 시간을 좋아하며, 새로운 사람들과의 만남을 즐깁니다.',
                    '찬양과 예배에서 뜨거운 감정을 경험하며, 이를 에너지로 삼아 신앙생활을 합니다.',
                    '하나님의 절대적인 주권을 인정하며, 말씀에 순종하는 것을 중요하게 생각합니다.',
                    '틀에 얽매이지 않고, 마음의 감동에 따라 자발적으로 신앙을 실천합니다.'
                ],
                growth: '자유로운 신앙생활에서 오는 유익도 있지만, 때로는 계획을 세워 꾸준히 말씀과 기도를 실천하는 훈련이 필요합니다. 깊은 말씀 묵상과 신학적 원리를 배우는 것에 힘써 보세요.',
                compatibility: '차분하고 이성적인 W 유형, 그리고 계획적인 O 유형과 좋은 균형을 이룰 수 있습니다.'
            },
            // R W D O (관계-이성-관계중심-정돈)
            'RWDO': {
                emoji: '🛡️',
                nickname: '신뢰의 동반자',
                description: '당신은 공동체에 소속감을 느끼며, 이성적이고 원리적인 신앙생활을 추구합니다. 하나님과의 친밀한 관계를 중요하게 생각하며, 체계적인 방법으로 신앙을 실천하는 유형입니다.',
                traits: [
                    '공동체 안에서 안정감을 느끼며, 꾸준히 봉사하는 것을 중요하게 생각합니다.',
                    '이성적이고 논리적인 방법으로 말씀을 이해하고, 신앙의 원리를 탐구하는 것을 좋아합니다.',
                    '하나님을 따뜻한 아버지와 같이 친밀한 분으로 인식하며, 그분과의 깊은 관계를 추구합니다.',
                    '말씀 묵상이나 기도 노트를 체계적으로 정리하는 등 계획적인 신앙생활을 합니다.'
                ],
                growth: '때로는 마음의 감동과 직관을 따라 하나님을 경험하는 것도 중요합니다. 정해진 틀을 벗어나 자유롭게 하나님과 교제하는 연습을 해보세요.',
                compatibility: '뜨거운 열정의 E 유형, 그리고 자유로운 영혼의 F 유형과 함께하면 더욱 풍성한 신앙생활을 할 수 있습니다.'
            },
            // R W D F (관계-이성-관계중심-유연)
            'RWDF': {
                emoji: '🕊️',
                nickname: '온유한 평화주의자',
                description: '당신은 공동체 안에서 평안을 찾으며, 이성적이고 원리적인 신앙생활을 합니다. 하나님과의 친밀한 관계를 추구하면서도 틀에 얽매이지 않는 자유로운 신앙의 태도를 가진 유형입니다.',
                traits: [
                    '공동체 사람들과의 교류를 소중히 여기며, 따뜻하고 온유한 관계를 지향합니다.',
                    '이성적인 말씀을 바탕으로 신앙을 쌓아가지만, 감정의 기복에 크게 좌우되지 않습니다.',
                    '하나님을 사랑이 많고 친밀한 분으로 인식하며, 내면의 평안을 중요하게 생각합니다.',
                    '자유롭고 유연한 방식으로 신앙생활을 즐기며, 계획에 얽매이지 않습니다.'
                ],
                growth: '너무 유연한 태도가 때로는 꾸준한 실천을 방해할 수 있습니다. 작은 목표라도 정하고 꾸준히 실천하는 노력을 통해 신앙의 내실을 다져가세요.',
                compatibility: '계획적이고 조직적인 O 유형, 그리고 권위와 원칙을 중시하는 P 유형과 서로 배우며 성장할 수 있습니다.'
            },
            // R W P O (관계-이성-원칙중심-정돈)
            'RWPO': {
                emoji: '⚖️',
                nickname: '진리의 수호자',
                description: '당신은 공동체와 함께 이성적인 신앙을 추구하며, 하나님을 공의의 주권자로 인식하고 계획적으로 신앙생활을 하는 유형입니다. 진리와 원칙을 중요하게 생각하며, 공동체에 올바른 방향을 제시합니다.',
                traits: [
                    '공동체에 헌신하며 질서를 존중하고, 맡은 일에 책임감을 다합니다.',
                    '성경의 진리를 깊이 연구하고, 신앙의 원칙과 기준을 세우는 것을 좋아합니다.',
                    '하나님의 공의와 주권을 인정하고, 그분의 뜻에 순종하는 것을 가장 중요하게 생각합니다.',
                    '규칙적이고 체계적인 신앙생활을 통해 자신의 믿음을 굳건히 세워나갑니다.'
                ],
                growth: '때로는 공동체의 질서와 원칙에 집중하느라 다른 지체들의 감정을 놓칠 수 있습니다. 말씀의 원리뿐만 아니라, 사랑과 관계의 중요성을 더욱 깊이 묵상해 보세요.',
                compatibility: '감성적이고 따뜻한 E 유형, 그리고 친밀한 관계를 중시하는 D 유형과 함께하면 더욱 균형 잡힌 시각을 가질 수 있습니다.'
            },
            // R W P F (관계-이성-원칙중심-유연)
            'RWPF': {
                emoji: '💡',
                nickname: '지혜로운 탐험가',
                description: '당신은 공동체 안에서 이성적인 신앙을 추구하며, 하나님을 원칙 중심적으로 인식하면서도 틀에 얽매이지 않는 유연한 태도를 가진 유형입니다. 끊임없이 진리를 탐구하며, 공동체에 새로운 통찰을 제공합니다.',
                traits: [
                    '공동체와 함께하지만 때로는 혼자만의 시간도 중요하게 생각합니다.',
                    '지적인 탐구를 즐기며, 신앙의 본질과 원리를 논리적으로 이해하려고 노력합니다.',
                    '하나님의 절대적인 주권과 공의를 신뢰하며, 성경의 진리에 깊은 관심을 가집니다.',
                    '자유로운 방식으로 신앙을 실천하며, 마음 가는 대로 헌신하는 것을 좋아합니다.'
                ],
                growth: '지적인 탐구에만 머무르지 않고, 행동으로 실천하며 꾸준히 신앙의 열매를 맺는 노력이 필요합니다. 때로는 계획을 세워 정기적인 훈련을 해보세요.',
                compatibility: '계획적이고 꾸준한 O 유형, 그리고 감성적인 E 유형과 함께할 때 좋은 시너지를 낼 수 있습니다.'
            },
            // S (독립 지향)
            // S E D O (독립-체험-관계중심-정돈)
            'SEDO': {
                emoji: '🌿',
                nickname: '고요한 정원사',
                description: '당신은 혼자만의 시간을 소중히 여기며, 감정적으로 신앙을 표현합니다. 하나님과의 친밀한 관계를 통해 영적 충만함을 얻고, 체계적인 방법으로 신앙을 관리하는 유형입니다.',
                traits: [
                    '공동체 활동보다는 개인적인 신앙생활에 집중하는 편입니다.',
                    '예배나 개인 기도에서 깊은 감동과 경험을 얻는 것을 중요하게 생각합니다.',
                    '하나님을 사랑이 많고 친밀한 분으로 인식하며, 그분과의 교제에서 힘을 얻습니다.',
                    '말씀 묵상이나 기도 시간을 규칙적으로 계획하고 지키려고 노력합니다.'
                ],
                growth: '때로는 공동체와 함께하는 신앙생활의 기쁨을 경험해 보세요. 마음을 열고 다른 지체들과 감정을 나누는 연습을 통해 더 풍성한 신앙을 누릴 수 있습니다.',
                compatibility: '관계 지향적인 R 유형, 그리고 자유로운 F 유형과 함께하면 신앙의 지경이 넓어집니다.'
            },
            // S E D F (독립-체험-관계중심-유연)
            'SEDF': {
                emoji: '🌠',
                nickname: '영혼의 방랑자',
                description: '당신은 혼자만의 시간 속에서 감정적으로 신앙을 표현하며, 하나님과의 친밀한 관계 속에서 자유롭게 신앙을 탐색하는 유형입니다. 형식에 얽매이지 않고 하나님을 경험하는 것을 즐깁니다.',
                traits: [
                    '혼자만의 시간을 통해 깊은 영적 교제를 갈망합니다.',
                    '찬양과 기도에서 오는 감정적인 경험을 소중히 여기며, 자유롭게 표현합니다.',
                    '하나님을 친밀하고 다정한 친구와 같이 인식하며, 그분과의 솔직한 대화를 좋아합니다.',
                    '계획보다는 그때그때 마음에 이끄시는 대로 신앙을 실천합니다.'
                ],
                growth: '감정의 기복에 따라 신앙생활도 불안정해질 수 있습니다. 꾸준하고 규칙적인 말씀 묵상과 기도를 통해 감정의 파도를 넘어설 수 있는 훈련이 필요합니다.',
                compatibility: '계획적인 O 유형, 그리고 말씀의 원칙을 중시하는 P 유형과 함께하면 신앙의 안정감을 얻을 수 있습니다.'
            },
            // S E P O (독립-체험-원칙중심-정돈)
            'SEPO': {
                emoji: '💎',
                nickname: '견고한 말씀의 등대',
                description: '당신은 독립적인 신앙을 추구하며, 감정적인 경험과 말씀의 원칙을 균형 있게 중요하게 여깁니다. 하나님을 주권자로 인식하며, 체계적인 신앙생활을 통해 믿음을 견고하게 세워나가는 유형입니다.',
                traits: [
                    '공동체 활동보다는 개인적인 말씀 묵상과 기도 시간을 선호합니다.',
                    '예배의 감동과 함께, 말씀의 논리적인 흐름과 진리를 깊이 이해하려 노력합니다.',
                    '하나님의 권위와 주권을 인정하며, 그분의 뜻에 순종하는 것을 중요하게 생각합니다.',
                    '계획적이고 꾸준한 신앙생활을 통해 자신의 믿음을 굳건히 다져갑니다.'
                ],
                growth: '자신만의 신앙생활을 고집하기보다는, 다른 지체들과 마음을 나누고 교제하는 시간을 가져보세요. 공동체 안에서 하나님이 주시는 또 다른 은혜를 경험할 수 있습니다.',
                compatibility: '관계 지향적인 R 유형, 그리고 자유로운 F 유형과 잘 맞습니다. 서로의 강점을 배우고 보완하며 성장할 수 있습니다.'
            },
            // S E P F (독립-체험-원칙중심-유연)
            'SEPF': {
                emoji: '🔥',
                nickname: '홀로 불타는 성령의 불꽃',
                description: '당신은 독립적으로 신앙을 추구하며, 감정적이고 뜨거운 경험을 중요하게 여깁니다. 하나님을 주권자로 인식하면서도 형식에 얽매이지 않는 자유로운 신앙을 가진 유형입니다.',
                traits: [
                    '혼자서 깊은 기도와 묵상을 하는 것을 좋아합니다.',
                    '찬양과 예배를 통해 뜨거운 감동과 성령의 임재를 경험하길 갈망합니다.',
                    '하나님의 절대적인 주권을 인정하며, 그분께 온전히 순종하려 노력합니다.',
                    '계획적인 신앙생활보다는 성령의 이끄심에 따라 유연하게 반응하는 것을 선호합니다.'
                ],
                growth: '뜨거운 열정만큼이나 꾸준함도 중요합니다. 규칙적인 말씀 묵상과 기도 시간을 정하고 지키려는 노력을 통해 신앙의 뿌리를 깊이 내리는 것이 좋습니다.',
                compatibility: '계획적이고 꾸준한 O 유형, 그리고 이성적이고 원리 중심적인 W 유형과 함께하면 더 넓고 깊은 신앙을 가질 수 있습니다.'
            },
            // S W D O (독립-이성-관계중심-정돈)
            'SWDO': {
                emoji: '🔎',
                nickname: '진실을 찾는 탐구자',
                description: '당신은 독립적인 신앙을 추구하며, 이성적이고 원리적인 사고를 통해 하나님과의 관계를 탐구합니다. 체계적인 신앙생활을 통해 자신만의 믿음을 견고하게 세워나가는 유형입니다.',
                traits: [
                    '단체 활동보다는 혼자만의 조용한 묵상과 기도를 통해 하나님을 만납니다.',
                    '성경 말씀을 논리적으로 분석하고, 신앙의 본질을 깊이 탐구하는 것을 좋아합니다.',
                    '하나님을 따뜻하고 친밀한 아버지로 인식하며, 그분과의 깊은 교제를 갈망합니다.',
                    '성경 통독이나 기도 노트를 규칙적으로 실천하는 데 능숙합니다.'
                ],
                growth: '이성적인 탐구에만 머무르지 않고, 때로는 감성적인 찬양과 기도를 통해 하나님을 경험해 보세요. 공동체와 교제하며 지체들과 신앙을 나누는 것도 중요합니다.',
                compatibility: '감성적이고 열정적인 E 유형, 그리고 관계 지향적인 R 유형과 함께하면 시야가 넓어집니다.'
            },
            // S W D F (독립-이성-관계중심-유연)
            'SWDF': {
                emoji: '🍃',
                nickname: '은혜의 바람',
                description: '당신은 독립적인 신앙을 추구하며, 이성적인 사고를 바탕으로 하나님과의 관계를 맺습니다. 형식에 얽매이지 않고 자유로운 방식으로 하나님을 만나고, 말씀의 은혜를 깊이 묵상하는 유형입니다.',
                traits: [
                    '혼자 있는 시간을 통해 하나님과 깊은 교제를 나눕니다.',
                    '말씀을 통해 논리적인 깨달음을 얻지만, 그 깨달음을 삶에 유연하게 적용합니다.',
                    '하나님을 친밀하고 사랑이 많은 분으로 인식하며, 내면의 자유와 평안을 추구합니다.',
                    '정해진 규칙 없이 마음이 이끄는 대로 신앙을 실천하는 것을 편안하게 생각합니다.'
                ],
                growth: '때로는 계획을 세워 신앙생활을 꾸준히 실천하는 노력이 필요합니다. 공동체 안에서 여러 사람들과 교제하며 자신의 믿음을 점검하는 것도 중요합니다.',
                compatibility: '계획적이고 조직적인 O 유형, 그리고 관계 지향적인 R 유형과 함께하면 더 균형 잡힌 신앙생활을 할 수 있습니다.'
            },
            // S W P O (독립-이성-원칙중심-정돈)
            'SWPO': {
                emoji: '🏛️',
                nickname: '견고한 성벽',
                description: '당신은 독립적인 신앙을 추구하며, 이성적인 사고를 통해 말씀의 원칙을 깊이 탐구합니다. 하나님을 주권자로 인식하며, 철저하고 체계적인 신앙생활을 통해 믿음을 굳건히 지켜나가는 유형입니다.',
                traits: [
                    '공동체보다는 개인적인 신앙생활을 더 선호하며, 혼자서도 흔들리지 않는 믿음을 가집니다.',
                    '논리적이고 분석적인 사고로 말씀을 깊이 묵상하고 신앙의 원리를 세워나갑니다.',
                    '하나님의 공의와 권위를 인정하며, 그분의 말씀에 순종하는 것을 삶의 최우선으로 여깁니다.',
                    '말씀 통독, 기도, 봉사 등을 계획적으로 실천하며, 스스로에게 엄격한 기준을 적용합니다.'
                ],
                growth: '신앙의 지식과 원칙이 중요하지만, 때로는 관계와 사랑의 감정을 통해 하나님을 경험하는 것도 중요합니다. 다른 지체들의 감정을 이해하고 교제하는 노력이 필요합니다.',
                compatibility: '감성적인 E 유형, 그리고 관계 지향적인 R 유형과 함께하면 신앙의 균형을 이룰 수 있습니다.'
            },
            // S W P F (독립-이성-원칙중심-유연)
            'SWPF': {
                emoji: '🗺️',
                nickname: '진리를 찾는 나침반',
                description: '당신은 독립적인 신앙을 추구하며, 이성적인 사고를 바탕으로 진리를 탐구합니다. 하나님을 주권자로 인식하지만, 형식에 얽매이지 않고 자유롭게 신앙의 길을 모색하는 유형입니다.',
                traits: [
                    '혼자만의 시간을 통해 말씀을 깊이 탐구하고 사색하는 것을 즐깁니다.',
                    '이성적이고 논리적인 방식으로 신앙의 본질을 파악하려 노력합니다.',
                    '하나님의 주권을 인정하지만, 개인의 자유와 자율적인 신앙을 중요하게 생각합니다.',
                    '정해진 틀 없이 마음에 이끌리는 대로 신앙을 실천하고 헌신합니다.'
                ],
                growth: '진리를 찾는 여정에서 꾸준함이 흔들릴 수 있습니다. 계획을 세우고 이를 지속적으로 실천하려는 노력을 통해 신앙의 뿌리를 깊이 내리는 것이 중요합니다.',
                compatibility: '계획적이고 조직적인 O 유형, 그리고 관계 지향적인 R 유형과 함께하면 더 폭넓은 신앙을 경험할 수 있습니다.'
            }
        };

        let currentQuestion = 0;
        let answers = []; // 사용자의 답변을 저장할 배열

        // DOM 요소 가져오기
        const startScreen = document.getElementById('startScreen');
        const testScreen = document.getElementById('testScreen');
        const resultScreen = document.getElementById('resultScreen');
        const loadingScreen = document.getElementById('loading');
        const progressBar = document.getElementById('progressBar');
        const questionNumberElem = document.getElementById('questionNumber');
        const questionTextElem = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // 테스트 시작 함수
        function startTest() {
            startScreen.style.display = 'none';
            testScreen.style.display = 'flex';
            currentQuestion = 0;
            answers = new Array(questions.length).fill(0); // 답변 배열 초기화
            renderQuestion(currentQuestion);
        }
        
        // 질문 화면 렌더링 함수
        function renderQuestion(index) {
            const question = questions[index];
            questionNumberElem.innerText = `${index + 1} / ${questions.length}`;
            questionTextElem.innerText = question.text;
            
            // 옵션 컨테이너 비우고 다시 그리기
            optionsContainer.innerHTML = '';
            
            // 왼쪽 텍스트 래퍼 생성
            const leftTextWrapper = document.createElement('div');
            leftTextWrapper.className = 'option-text-wrapper left';
            leftTextWrapper.innerText = question.leftText;
            optionsContainer.appendChild(leftTextWrapper);
            
            // 원형 버튼 래퍼 생성
            const circleWrapper = document.createElement('div');
            circleWrapper.className = 'circle-wrapper';
            
            for (let i = 1; i <= 4; i++) {
                const optionContainer = document.createElement('label'); // label로 변경하여 접근성 향상
                optionContainer.htmlFor = `q${index}_opt${i}`;
                optionContainer.className = 'option-circle-container';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'question' + index;
                radio.id = `q${index}_opt${i}`;
                radio.value = i;
                radio.checked = answers[index] === i; // 이전에 선택된 값 반영
                radio.onchange = () => selectOption(i);
                
                const circle = document.createElement('div');
                circle.className = `option-circle ${i === 1 || i === 4 ? 'large' : 'small'}`;
                optionContainer.appendChild(radio);
                optionContainer.appendChild(circle);
                
                circleWrapper.appendChild(optionContainer);
            }
            optionsContainer.appendChild(circleWrapper);

            // 오른쪽 텍스트 래퍼 생성
            const rightTextWrapper = document.createElement('div');
            rightTextWrapper.className = 'option-text-wrapper right';
            rightTextWrapper.innerText = question.rightText;
            optionsContainer.appendChild(rightTextWrapper);

            // 이전/다음 버튼 상태 업데이트
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = answers[index] === 0;

            // 진행률 바 업데이트
            progressBar.style.width = `${((index + 1) / questions.length) * 100}%`;
        }

        // 옵션 선택 시 호출되는 함수
        function selectOption(value) {
            answers[currentQuestion] = value;
            nextBtn.disabled = false;
        }

        // 다음 질문으로 이동
        function nextQuestion() {
            if (answers[currentQuestion] === 0) return;
            currentQuestion++;
            if (currentQuestion < questions.length) {
                renderQuestion(currentQuestion);
            } else {
                showResult();
            }
        }

        // 이전 질문으로 이동
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion(currentQuestion);
            }
        }
        
        // 결과 계산 및 표시
        function showResult() {
            testScreen.style.display = 'none';
            loadingScreen.style.display = 'block';

            setTimeout(() => {
                loadingScreen.style.display = 'none';
                resultScreen.style.display = 'flex';
                resultScreen.style.flexDirection = 'column';

                const scores = {
                    'R': 0, 'S': 0,
                    'E': 0, 'W': 0,
                    'D': 0, 'P': 0,
                    'O': 0, 'F': 0
                };

                answers.forEach((answer, index) => {
                    const question = questions[index];
                    if (answer <= 2) { // 왼쪽 선택
                        scores[question.leftType]++;
                    } else { // 오른쪽 선택
                        scores[question.rightType]++;
                    }
                });

                const finalType = 
                    (scores['R'] >= scores['S'] ? 'R' : 'S') +
                    (scores['E'] >= scores['W'] ? 'E' : 'W') +
                    (scores['D'] >= scores['P'] ? 'D' : 'P') +
                    (scores['O'] >= scores['F'] ? 'O' : 'F');
                
                // 결과 출력
                const result = resultTypes[finalType] || resultTypes['REDO']; // 기본값
                document.getElementById('typeEmoji').innerText = result.emoji;
                document.getElementById('typeCode').innerText = finalType;
                document.getElementById('typeNickname').innerText = result.nickname;
                document.getElementById('typeDescription').innerText = result.description;
                document.getElementById('growthPoint').innerText = result.growth;
                document.getElementById('compatibility').innerText = result.compatibility;
                
                // 특징 목록 생성
                const traitsList = document.getElementById('traitsList');
                traitsList.innerHTML = '';
                result.traits.forEach(trait => {
                    const li = document.createElement('li');
                    li.innerText = trait;
                    traitsList.appendChild(li);
                });
                
                // 상세 분석 시각화
                renderScoreDetails(scores);
            }, 1500); // 1.5초 로딩
        }

        function renderScoreDetails(scores) {
            const scoreDetails = document.getElementById('scoreDetails');
            scoreDetails.innerHTML = '';
            
            const dimensions = [
                { id: 'RS', left: 'R', right: 'S', leftLabel: '관계 지향', rightLabel: '독립 지향' },
                { id: 'EW', left: 'E', right: 'W', leftLabel: '감정/경험 지향', rightLabel: '이성/원리 지향' },
                { id: 'DP', left: 'D', right: 'P', leftLabel: '관계/친밀함 지향', rightLabel: '권위/주권 지향' },
                { id: 'OF', left: 'O', right: 'F', leftLabel: '조직/계획 지향', rightLabel: '유연/자유 지향' }
            ];

            dimensions.forEach(dim => {
                const totalScore = scores[dim.left] + scores[dim.right];
                const leftPercentage = (scores[dim.left] / totalScore) * 100;
                const rightPercentage = (scores[dim.right] / totalScore) * 100;

                const scoreRow = document.createElement('div');
                scoreRow.className = 'score-row';
                
                scoreRow.innerHTML = `
                    <div class="score-labels">
                        <span class="score-label ${leftPercentage > 50 ? 'active' : ''}">${dim.leftLabel} (${scores[dim.left]}점)</span>
                        <span class="score-label ${rightPercentage > 50 ? 'active' : ''}">${dim.rightLabel} (${scores[dim.right]}점)</span>
                    </div>
                    <div class="score-bar-container">
                        <div class="score-fill-left" style="width: ${leftPercentage}%"></div>
                        <div class="score-fill-right" style="width: ${rightPercentage}%"></div>
                        <div class="score-bar-center"></div>
                    </div>
                `;
                scoreDetails.appendChild(scoreRow);
            });
        }
        
        // 이미지 다운로드 함수
        async function downloadResultImage() {
            const resultScreen = document.getElementById('resultScreen');
            const loadingScreen = document.getElementById('loading');
            
            loadingScreen.style.display = 'block';

            // 스크롤 위치를 맨 위로 이동하여 모든 콘텐츠가 렌더링되도록 함
            const originalScrollY = window.scrollY;
            window.scrollTo(0, 0);

            // html2canvas 옵션 설정
            const options = {
                scrollX: 0,
                scrollY: 0,
                windowWidth: document.documentElement.offsetWidth,
                windowHeight: document.documentElement.scrollHeight,
                scale: 2 // 해상도를 높여 선명하게 만듬
            };

            try {
                const canvas = await html2canvas(resultScreen, options);
                
                // 다운로드 링크 생성 및 클릭
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = 'FATI_Result.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                alert('결과 이미지가 다운로드 되었습니다!');

            } catch (error) {
                console.error('이미지 저장 실패:', error);
                alert('이미지 저장에 실패했습니다. 다시 시도해 주세요.');
            } finally {
                loadingScreen.style.display = 'none';
                window.scrollTo(0, originalScrollY); // 스크롤 위치 복구
            }
        }
        
        // 결과 링크 복사 함수 (임시, 실제 구현은 서버 로직이 필요)
        function shareResult() {
            const url = window.location.href;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(url)
                    .then(() => {
                        alert('결과 링크가 클립보드에 복사되었습니다!');
                    })
                    .catch(err => {
                        console.error('클립보드 복사 실패:', err);
                        alert('링크 복사에 실패했습니다. 수동으로 복사해주세요.');
                    });
            } else {
                const tempInput = document.createElement('input');
                tempInput.value = url;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('결과 링크가 클립보드에 복사되었습니다!');
            }
        }

        // 다시 검사하기
        function restartTest() {
            resultScreen.style.display = 'none';
            startTest();
        }

    </script>
</body>
</html>