<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title>SCTI ì„±ë½êµíšŒ ì„±í–¥ê²€ì‚¬ - Sungrak Church Type Indicator</title>
<!-- html2canvas ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    :root{
        --primary:#5B72EE;--secondary:#FF6B9D;
        --background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
        --text-dark:#2c3e50;--text-light:#495057;
        --gray-light:#f8f9fa;--gray-medium:#e9ecef;
        --circle-large-size:60px;--circle-small-size:40px;
    }
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:var(--background);min-height:100vh;overflow-x:hidden;color:var(--text-dark)}
    .container{min-height:100vh;display:flex;flex-direction:column}
    /* ì‹œì‘ í™”ë©´ */
    .start-screen{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;padding:20px;text-align:center;color:#fff;position:relative;overflow:hidden;animation:fadeIn .5s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .catchphrase{font-size:16px;opacity:.95;margin:20px 0;font-style:italic;letter-spacing:.5px;z-index:2}
    .logo{font-size:80px;margin-bottom:30px;animation:pulse 2s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .start-screen h1{font-size:36px;font-weight:700;margin-bottom:10px}
    .start-screen .english-title{font-size:18px;opacity:.9;margin-bottom:25px;font-style:italic}
    .scti-explanation{background:rgba(255,255,255,.15);backdrop-filter:blur(10px);border-radius:20px;padding:25px;margin-bottom:30px;text-align:left;max-width:420px}
    .scti-explanation h3{font-size:20px;margin-bottom:15px;text-align:center}
    .scti-explanation .description{font-size:14px;line-height:1.6;text-align:center;margin-bottom:20px;opacity:.9}
    .scti-item{margin:12px 0;font-size:14px;line-height:1.5;display:flex;align-items:center;gap:10px}
    .scti-item .letter{background:#FFE66D;color:#764ba2;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
    .start-btn{background:#fff;color:var(--primary);border:none;padding:18px 60px;border-radius:30px;font-size:18px;font-weight:600;cursor:pointer;transition:.3s;box-shadow:0 10px 30px rgba(0,0,0,.2)}
    .start-btn:hover{transform:translateY(-2px);box-shadow:0 15px 40px rgba(0,0,0,.3)}
    .start-btn:active{transform:scale(.95)}
    /* ê²€ì‚¬ í™”ë©´ */
    .test-screen{display:none;background:#fff;min-height:100vh;animation:slideIn .3s ease}
    @keyframes slideIn{from{transform:translateX(100%)}to{transform:translateX(0)}}
    .header{background:var(--background);padding:20px;color:#fff;position:sticky;top:0;z-index:100;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .progress-container{background:rgba(255,255,255,.2);height:6px;border-radius:3px;overflow:hidden;margin-top:10px;max-width:420px;margin-left:auto;margin-right:auto}
    .progress-bar{height:100%;background:#fff;border-radius:3px;transition:width .4s ease;box-shadow:0 0 10px rgba(255,255,255,.5)}
    .question-container{padding:30px 20px 120px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 180px);text-align:center}
    .question-number{color:var(--primary);font-weight:600;font-size:14px;margin-bottom:15px}
    .question-text{font-size:22px;font-weight:600;line-height:1.5;margin-bottom:30px;color:var(--text-dark);text-align:center;max-width:90%}
    .options-scale{display:flex;align-items:center;justify-content:space-between;gap:15px;flex-wrap:nowrap;padding:0 10px;max-width:640px;margin:0 auto;width:100%}
    .option-text-wrapper{flex-basis:30%;flex-shrink:1;text-align:center;font-size:14px;color:var(--text-light);line-height:1.4;display:flex;align-items:center;justify-content:center;min-height:var(--circle-large-size);padding:10px;background:var(--gray-light);border-radius:12px;border:2px solid transparent;transition:.3s}
    .option-text-wrapper.selected-left,.option-text-wrapper.selected-right{background:linear-gradient(135deg,rgba(102,126,234,.1),rgba(118,75,162,.1));border-color:var(--primary);font-weight:500}
    .circle-wrapper{display:flex;align-items:center;justify-content:center;flex-grow:1;gap:10px}
    .option-circle-container{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-basis:0;text-align:center;cursor:pointer;transition:.2s;padding:5px}
    .option-circle{border-radius:50%;background:var(--gray-light);border:2px solid var(--gray-medium);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:.2s}
    .option-circle.large{width:var(--circle-large-size);height:var(--circle-large-size)}
    .option-circle.small{width:var(--circle-small-size);height:var(--circle-small-size)}
    input[type="radio"]{display:none}
    input[type="radio"]:checked + .option-circle-container .option-circle{background:var(--secondary);border-color:var(--secondary);transform:scale(1.1);box-shadow:0 4px 8px rgba(0,0,0,.2)}
    .option-circle-container:hover .option-circle{background:var(--gray-medium)}
    .mobile-text-display{display:none;margin-top:20px;padding:15px;background:var(--gray-light);border-radius:12px;max-width:90%;margin-left:auto;margin-right:auto}
    .left-indicator,.right-indicator{display:inline-block;padding:3px 8px;border-radius:4px;font-size:12px;font-weight:600;margin-bottom:5px;color:#fff}
    .left-indicator{background:linear-gradient(90deg,#667eea,#764ba2)}
    .right-indicator{background:linear-gradient(90deg,#764ba2,#667eea)}
    .navigation{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:15px 20px;box-shadow:0 -2px 15px rgba(0,0,0,.1);display:flex;gap:12px;z-index:100}
    .nav-btn{flex:1;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:.2s}
    .nav-btn.prev{background:var(--gray-medium);color:var(--text-light)}
    .nav-btn.next{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
    .nav-btn:disabled{opacity:.4;cursor:not-allowed}
    .nav-btn:active:not(:disabled){transform:scale(.96)}
    /* ê²°ê³¼ í™”ë©´ */
    .result-screen{display:none;background:#fff;min-height:100vh;animation:fadeIn .5s ease}
    .result-header{background:var(--background);padding:50px 20px 60px;text-align:center;color:#fff;position:relative;overflow:hidden}
    .result-header::after{content:'';position:absolute;bottom:-2px;left:0;right:0;height:60px;background:#fff;border-radius:30px 30px 0 0}
    .type-badge{display:inline-block;background:rgba(255,255,255,.2);padding:8px 20px;border-radius:20px;font-size:14px;margin-bottom:20px}
    .type-code{font-size:48px;font-weight:800;margin:15px 0;letter-spacing:3px;text-shadow:2px 2px 4px rgba(0,0,0,.1)}
    .type-emoji{font-size:64px;margin:20px 0;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.2))}
    .type-nickname{font-size:28px;font-weight:600;margin-bottom:30px}
    .result-content{padding:40px 20px}
    .card{background:var(--gray-light);border-radius:20px;padding:25px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
    .card h3{color:var(--text-dark);font-size:18px;margin-bottom:15px;display:flex;align-items:center;gap:8px}
    .card p{color:var(--text-light);line-height:1.7;font-size:15px}
    .traits{list-style:none;margin-top:15px}
    .traits li{padding:12px 0;color:var(--text-light);font-size:15px;display:flex;align-items:flex-start;gap:10px;border-bottom:1px solid var(--gray-medium)}
    .traits li:last-child{border-bottom:none}
    .traits li::before{content:'âœ¨';flex-shrink:0}
    .score-visualization{background:#fff;border:2px solid var(--gray-medium);border-radius:20px;padding:25px;margin:20px 0}
    .score-row{margin:25px 0}
    .score-labels{display:flex;justify-content:space-between;margin-bottom:10px;font-size:14px}
    .score-label{color:var(--text-light);font-weight:600}
    .score-label.active{color:var(--primary);font-weight:700}
    .score-bar-container{position:relative;height:12px;background:var(--gray-medium);border-radius:6px;overflow:hidden}
    .score-bar-center{position:absolute;left:50%;top:0;bottom:0;width:3px;background:var(--text-dark);opacity:.7;z-index:1}
    .score-fill-left{position:absolute;right:50%;top:0;height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:6px 0 0 6px;transition:width 1s ease}
    .score-fill-right{position:absolute;left:50%;top:0;height:100%;background:linear-gradient(90deg,#764ba2,#667eea);border-radius:0 6px 6px 0;transition:width 1s ease}
    .actions{padding:20px 20px 40px}
    .action-btn{width:100%;padding:18px;border:none;border-radius:16px;font-size:16px;font-weight:600;cursor:pointer;transition:.2s;margin-bottom:12px}
    .action-btn.primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
    .action-btn.secondary{background:var(--gray-light);color:var(--text-light)}
    .action-btn:active{transform:scale(.97)}
    .copyright{text-align:center;padding:20px;color:var(--text-light);font-size:12px;background:var(--gray-light);line-height:1.6}
    /* ê²°ê³¼ ì´ë¯¸ì§€ ì „ìš© ìº¡ì²˜ ì¹´ë“œ(ìˆ¨ê¹€, ìº¡ì²˜ì‹œë§Œ ë³´ì—¬ì¤Œ) */
    .result-card-for-image{display:none;position:fixed;top:0;left:0;width:390px;min-height:844px;background:#fff;z-index:10000;overflow:hidden}
    .result-card-header{background:var(--background);padding:50px 20px 40px;text-align:center;color:#fff;position:relative}
    .result-card-header::after{content:'';position:absolute;bottom:-30px;left:0;right:0;height:60px;background:#fff;border-radius:30px 30px 0 0}
    .result-card-header .emoji{font-size:72px;margin-bottom:20px;filter:drop-shadow(2px 2px 4px rgba(0,0,0,.2))}
    .result-card-header .type-code{font-size:42px;font-weight:800;letter-spacing:3px;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,.1)}
    .result-card-header .nickname{font-size:22px;font-weight:600;opacity:.95}
    .result-card-body{padding:40px 20px 30px;position:relative;z-index:1}
    .result-card-body .description{color:var(--text-dark);line-height:1.7;margin-bottom:20px;font-size:15px;text-align:center;padding:16px;background:var(--gray-light);border-radius:16px}
    .result-card-body .traits-title{font-size:18px;font-weight:700;color:var(--text-dark);margin-bottom:12px;text-align:center}
    .result-card-body .traits-list{list-style:none;padding:0;margin:0}
    .result-card-body .traits-list li{padding:10px;margin-bottom:10px;background:#fff;border:2px solid var(--gray-medium);border-radius:12px;font-size:14px;line-height:1.6;color:var(--text-dark);display:flex;align-items:flex-start;gap:10px}
    .result-card-body .traits-list li::before{content:'âœ¨';flex-shrink:0;font-size:16px}
    .result-card-body .graph-title{font-size:16px;font-weight:700;margin:18px 0 8px;text-align:center}
    .result-card-body .mini-graph{background:#fff;border:2px solid var(--gray-medium);border-radius:16px;padding:16px}
    .result-card-footer{padding:12px 16px;background:var(--gray-light);color:var(--text-light);font-size:12px;text-align:center;border-top:1px solid var(--gray-medium)}
    @media(min-width:768px){.container{max-width:680px;margin:0 auto;box-shadow:0 0 50px rgba(0,0,0,.08)}}
    @media(max-width:767px){
        .options-scale{flex-direction:column;align-items:center;gap:20px;padding:0 5px}
        .option-text-wrapper{display:none}
        .mobile-text-display{display:block}
        .circle-wrapper{width:100%;justify-content:center;gap:8px}
        .option-circle.large{width:55px;height:55px}
        .option-circle.small{width:35px;height:35px}
        .question-text{font-size:20px;margin-bottom:20px}
    }
</style>
</head>
<body>
<div class="container">
    <!-- ì‹œì‘ í™”ë©´ -->
    <div class="start-screen" id="startScreen">
        <div class="catchphrase">ë‚˜ë§Œì˜ ë…íŠ¹í•œ ì‹ ì•™ ìŠ¤íƒ€ì¼ì„ ë°œê²¬í•´ë³´ì„¸ìš”</div>
        <div class="logo">â›ª</div>
        <h1>SCTI ì„±ë½êµíšŒ ì„±í–¥ê²€ì‚¬</h1>
        <div class="english-title">Sungrak Church Type Indicator</div>

        <div class="scti-explanation">
            <h3>ğŸ” SCTIë€?</h3>
            <p class="description">ì„±ë½êµíšŒ ê³µë™ì²´ ì•ˆì—ì„œ ë‚˜ì˜ ì‹ ì•™ ì„±í–¥ì„ ì•Œì•„ë³´ëŠ” ê²€ì‚¬ì…ë‹ˆë‹¤</p>
            <div class="scti-item"><div class="letter">S</div><div>Social - ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥ (R/S)</div></div>
            <div class="scti-item"><div class="letter">C</div><div>Character - ì‹ ì•™ í‘œí˜„ ë°©ì‹ (E/W)</div></div>
            <div class="scti-item"><div class="letter">T</div><div>Theology - í•˜ë‚˜ë‹˜ ì¸ì‹ ë°©ì‹ (D/P)</div></div>
            <div class="scti-item"><div class="letter">I</div><div>Implementation - ì‹ ì•™ìƒí™œ íŒ¨í„´ (O/F)</div></div>
        </div>

        <button class="start-btn" onclick="startTest()">ì‹œì‘í•˜ê¸°</button>
        <div style="margin-top:30px;font-size:14px;opacity:.85">â± ì•½ 5ë¶„ ì†Œìš” | ğŸ“ 20ë¬¸í•­</div>
    </div>

    <!-- ê²€ì‚¬ í™”ë©´ -->
    <div class="test-screen" id="testScreen">
        <div class="header">
            <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
        </div>

        <div class="question-container">
            <div class="question-number" id="questionNumber"></div>
            <div class="question-text" id="questionText"></div>
            <div class="options-scale" id="optionsContainer"></div>

            <!-- ëª¨ë°”ì¼ ì „ìš© í…ìŠ¤íŠ¸ í‘œì‹œ -->
            <div class="mobile-text-display" id="mobileTextDisplay" style="display:none;">
                <div><span class="left-indicator">â—€ ì™¼ìª½</span>
                    <p id="mobileLeftText" style="margin:5px 0;font-size:14px;"></p></div>
                <div style="margin-top:15px;"><span class="right-indicator">ì˜¤ë¥¸ìª½ â–¶</span>
                    <p id="mobileRightText" style="margin:5px 0;font-size:14px;"></p></div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn prev" id="prevBtn" onclick="goPrev()" disabled>ì´ì „</button>
            <button class="nav-btn next" id="nextBtn" onclick="goNext()" disabled>ë‹¤ìŒ</button>
        </div>
    </div>

    <!-- ê²°ê³¼ í™”ë©´ -->
    <div class="result-screen" id="resultScreen">
        <div class="result-header">
            <div class="type-badge" id="typeBadge">SCTI ê²°ê³¼</div>
            <div class="type-emoji" id="resultEmoji">âœ¨</div>
            <div class="type-code" id="resultCode">REDF</div>
            <div class="type-nickname" id="resultNickname">ë³„ëª…</div>
        </div>

        <div class="result-content">
            <div class="card">
                <h3>ìš”ì•½ ì„¤ëª…</h3>
                <p id="resultDescription">ì„¤ëª…</p>
            </div>

            <div class="card score-visualization" id="scoreBox">
                <h3>ìƒì„¸ ë¶„ì„ ê·¸ë˜í”„</h3>
                <div id="scoresArea"></div>
            </div>

            <div class="card">
                <h3>íŠ¹ì§•</h3>
                <ul class="traits" id="traitList"></ul>
            </div>
        </div>

        <div class="actions">
            <button class="action-btn primary" onclick="downloadResultImage()">ê²°ê³¼ ì´ë¯¸ì§€ ì €ì¥ (ê·¸ë˜í”„ í¬í•¨)</button>
            <button class="action-btn secondary" onclick="restart()">ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</button>
        </div>

        <div class="copyright">
            <strong>SCTI</strong> | Sungrak Church Type Indicator<br/>
            ê²°ê³¼ ì´ë¯¸ì§€ëŠ” ê°œì¸ ê¸°ë¡ ë° ë‚˜ëˆ” ìš©ë„ë¡œ í™œìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
    </div>

    <!-- ë‹¤ìš´ë¡œë“œìš© ìˆ¨ê¹€ ì¹´ë“œ(ê·¸ë˜í”„ í¬í•¨ ìº¡ì²˜ì˜ì—­) -->
    <div class="result-card-for-image" id="imageCard">
        <div class="result-card-header">
            <div class="emoji" id="imgEmoji">âœ¨</div>
            <div class="type-code" id="imgCode">REDF</div>
            <div class="nickname" id="imgNickname">ë‹‰ë„¤ì„</div>
        </div>
        <div class="result-card-body">
            <div class="description" id="imgDescription">ì„¤ëª…</div>

            <div class="graph-title">ìƒì„¸ ë¶„ì„ ê·¸ë˜í”„</div>
            <div class="mini-graph" id="imgGraph"></div>

            <div class="traits-title">íŠ¹ì§•</div>
            <ul class="traits-list" id="imgTraits"></ul>
        </div>
        <div class="result-card-footer">SCTI â€¢ Sungrak Church Type Indicator</div>
    </div>
</div>

<script>
/* ===================== 1) ì§ˆë¬¸ ì›ë³¸(ì •í™•íˆ 20ë¬¸í•­) ===================== */
const baseQuestions = [
  // ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥ (R/S) â€” 5
  { category:'ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥', text:'ğŸµ ì„±ê°€ëŒ€ ì—°ìŠµì— 10ë¶„ ëŠ¦ì€ ë‹¹ì‹ ! ëª¨ë‘ê°€ ë¨¼ì € ì™€ ìˆê³ , ë‹¹ì‹ ë§Œ ëˆˆì¹˜ ë³´ë©° ë“¤ì–´ê°„ ìƒí™©ì—ì„œâ€¦',
    leftText:'ê°€ë³ê²Œ ì‚¬ê³¼í•˜ê³  ì£¼ë³€ì— ìì—°ìŠ¤ëŸ½ê²Œ ì„ì´ëŠ” í¸ì´ë‹¤.', rightText:'ëˆ„êµ¬ë„ ë§ ì•ˆ ê±¸ì—ˆìœ¼ë©´ í•˜ê³  ê·¸ëƒ¥ ë¬µë¬µíˆ ì•‰ì•„ìˆëŠ” í¸ì´ë‹¤.', leftType:'R', rightType:'S' },
  { category:'ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥', text:'ğŸ™‹ ì²­ë…„ë¶€ì— ìƒˆë¡œ ì˜¨ ì§€ì²´ê°€ í˜¼ì ì•‰ì•„ìˆë‹¤.',
    leftText:'ë°˜ê°€ìš´ ë§ˆìŒìœ¼ë¡œ ë¨¼ì € ë‹¤ê°€ê°€ ë§ì„ ê±´ë„¨ë‹¤.', rightText:'ì–´ìƒ‰í•´ì„œ ë‹¤ê°€ê°€ê¸´ ì–´ë µì§€ë§Œ ì¡°ìš©íˆ ê´€ì‹¬ì„ ê°–ê³  ê¸°íšŒê°€ ë˜ë©´ ê°œì¸ì ìœ¼ë¡œ ëŒ€í™”í•œë‹¤.', leftType:'R', rightType:'S' },
  { category:'ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥', text:'ğŸ“† ìˆ˜ë ¨íšŒì— ì°¸ì„í•˜ê²Œ ëœ ë‹¹ì‹ , ê°€ì¥ ê¸°ëŒ€í•˜ëŠ” ê²ƒì€?',
    leftText:'ë§ì€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ëœ¨ê±°ìš´ ì˜ˆë°°ë¥¼ ë“œë¦¬ëŠ” ê²ƒ', rightText:'í˜¼ìë§Œì˜ ì‹œê°„ì— ëœ¨ê²ê²Œ ê¸°ë„í•˜ëŠ” ê²ƒ', leftType:'R', rightType:'S' },
  { category:'ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥', text:'ğŸ§  ì‹ ì•™ì ì¸ ê³ ë¯¼ì´ ê¹Šì–´ì§„ ì‹œê¸°, ë‹¹ì‹ ì€?',
    leftText:'ì‹ ì•™ ì¹œêµ¬ë“¤ê³¼ ë‚˜ëˆ„ë©° í•¨ê»˜ ê¸°ë„í•œë‹¤.', rightText:'í˜¼ì í•˜ë‚˜ë‹˜ê»˜ ê¸°ë„í•˜ë©° ë‹µì„ êµ¬í•œë‹¤.', leftType:'R', rightType:'S' },
  { category:'ê³µë™ì²´ ì°¸ì—¬ ì„±í–¥', text:'â“ êµíšŒ ì¬ì •ì´ë‚˜ í—Œê¸ˆì— ëŒ€í•´ ë‚´ ë§ˆìŒì€?',
    leftText:'ê³µë™ì²´ê°€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë¼ ê¸°êº¼ì´ ë‚˜ëˆ„ê³  ì‹¶ì€ ë§ˆìŒì´ë‹¤.', rightText:'ì¡°ìš©íˆ í•˜ë‚˜ë‹˜ ì•ì—ì„œ ê²°ì •í•˜ê³  í—Œê¸ˆì€ ê°œì¸ì ì¸ í—Œì‹ ì´ë¼ê³  ìƒê°í•œë‹¤.', leftType:'R', rightType:'S' },

  // ì‹ ì•™ í‘œí˜„ë°©ì‹ (E/W) â€” 5
  { category:'ì‹ ì•™ í‘œí˜„ë°©ì‹', text:'ğŸ¤ ì¸ì›Œì‹­ì— ì°¸ì„í•œ ë‹¹ì‹ , ì–´ë–¤ ìŠ¤íƒ€ì¼ì¸ê°€ìš”?',
    leftText:'ëª¸ìœ¼ë¡œ í‘œí˜„í•˜ë©° ê°ì •ì´ ìš°ëŸ¬ë‚˜ëŠ” ì°¬ì–‘ì„ ì¢‹ì•„í•œë‹¤', rightText:'ê°€ì‚¬ì˜ ì˜ë¯¸ë¥¼ ìƒê°í•˜ë©° ì¡°ìš©íˆ ë§ˆìŒìœ¼ë¡œ ë¶€ë¥¸ë‹¤', leftType:'E', rightType:'W' },
  { category:'ì‹ ì•™ í‘œí˜„ë°©ì‹', text:'ğŸ“– ë§ì”€ ë“£ëŠ” ì¤‘, ë‹¹ì‹ ì˜ ìì„¸ëŠ”?',
    leftText:'ë§ì”€ì„ í†µí•´ ë°›ì€ ê°ë™ê³¼ ëŠë‚Œì„ ì¤‘ì‹¬ìœ¼ë¡œ ì •ë¦¬í•œë‹¤.', rightText:'ë…¼ë¦¬ì  íë¦„ê³¼ ë‹¨ì–´ì˜ ëœ»ì„ êµ¬ì¡°ì ìœ¼ë¡œ ì •ë¦¬í•œë‹¤.', leftType:'E', rightType:'W' },
  { category:'ì‹ ì•™ í‘œí˜„ë°©ì‹', text:'ğŸ™ ê¸°ë„ì‘ë‹µì„ ê²½í—˜í–ˆì„ ë•Œ',
    leftText:'í•˜ë‚˜ë‹˜ì´ ì‚´ì•„ê³„ì‹¬ì„ ëŠê¼ˆë‹¤ëŠ” ì²´í—˜ì— ì§‘ì¤‘í•œë‹¤.', rightText:'í•˜ë‚˜ë‹˜ì˜ ëœ»ì´ ë¬´ì—‡ì¸ì§€ ê¹¨ë‹¬ì€ ê²ƒì— ì§‘ì¤‘í•œë‹¤.', leftType:'E', rightType:'W' },
  { category:'ì‹ ì•™ í‘œí˜„ë°©ì‹', text:'ğŸ’¬ ìˆ˜ë ¨íšŒ ì´í›„, ëª©ì¥ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ê°„ì¦ ë‚˜ëˆ”ì„ í•˜ê²Œ ëœ ë‹¹ì‹ ',
    leftText:'í•˜ë‚˜ë‹˜ì„ ê²½í—˜í•œ ìˆœê°„ì˜ ê°ì •ê³¼ ëŠë‚Œì„ ìì„¸íˆ ë‚˜ëˆˆë‹¤', rightText:'í•˜ë‚˜ë‹˜ì´ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ì—­ì‚¬í•˜ì…¨ëŠ”ì§€ ì‚¬ì‹¤ ì¤‘ì‹¬ìœ¼ë¡œ ë‚˜ëˆˆë‹¤', leftType:'E', rightType:'W' },
  { category:'ì‹ ì•™ í‘œí˜„ë°©ì‹', text:'ğŸ’° ì¬ì •ì´ë‚˜ ì‹œê°„ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•  ë•Œ ê¸°ì¤€ì€?',
    leftText:'ë§ˆìŒì†ì—ì„œ í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ê°ë™ì´ë‚˜ íë¦„ì„ ë”°ë¥¸ë‹¤.', rightText:'ë§ì”€ì„ í†µí•´ ë°°ìš°ê³  ì ìš©í•œ ì›ì¹™ì„ ì¤‘ì‹¬ìœ¼ë¡œ íŒë‹¨í•œë‹¤.', leftType:'E', rightType:'W' },

  // í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹ (D/P) â€” 5
  { category:'í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹', text:'ğŸ“– ì„±ê²½ì„ ì½ì„ ë•Œ ê°€ì¥ ë¨¼ì € ë“œëŠ” ê°ì •ì€?',
    leftText:'í•˜ë‚˜ë‹˜ì´ ë‚´ê²Œ ë§ ê±¸ì–´ ì£¼ì‹œëŠ” ë“¯í•œ ì¹œë°€ê°ì„ ëŠë¼ëŠ” í¸ì´ë‹¤', rightText:'í•˜ë‚˜ë‹˜ì˜ ëª…ë ¹ê³¼ ê¸°ì¤€ì´ ë¬´ì—‡ì¸ì§€ ì°¾ëŠ” í¸ì´ë‹¤', leftType:'D', rightType:'P' },
  { category:'í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹', text:'ğŸ™ ê¸°ë„í•  ë•Œ, ë‹¹ì‹ ì€ í•˜ë‚˜ë‹˜ì„ ì–´ë–»ê²Œ ê·¸ë¦¬ëŠ”ê°€?',
    leftText:'ë‚´ê°€ í˜ë“¤ ë•Œ ì•ˆì•„ ì£¼ì‹œëŠ” ë”°ëœ»í•œ ë¶„', rightText:'ë‚´ ì‚¶ì„ íŒë‹¨í•˜ê³  ì´ë„ì‹œëŠ” ê¸°ì¤€ì´ì ì£¼ê¶Œì', leftType:'D', rightType:'P' },
  { category:'í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹', text:'ğŸ§­ ë¯¿ìŒì˜ ê²°ì •ì„ ë‚´ë ¤ì•¼ í•  ë•Œ, ë‹¹ì‹ ì€?',
    leftText:'ë§ˆìŒì— í‰ì•ˆì´ ìˆëŠ”ì§€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ë³„í•œë‹¤.', rightText:'ë§ì”€ì˜ ê¸°ì¤€ì— ë§ëŠ”ì§€ë¥¼ ë”°ì ¸ë³¸ë‹¤.', leftType:'D', rightType:'P' },
  { category:'í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹', text:'âœï¸ ì‹ ì•™ìƒí™œì˜ ì£¼ëœ ë™ê¸°ëŠ”',
    leftText:'í•˜ë‚˜ë‹˜ê³¼ì˜ ë” ê¹Šì€ ì‚¬ë‘ì˜ ê´€ê³„ë¥¼ ìœ„í•´', rightText:'í•˜ë‚˜ë‹˜ì´ ê¸°ë»í•˜ì‹œëŠ” ì˜¬ë°”ë¥¸ ì‚¶ì„ ì‚´ê¸° ìœ„í•´', leftType:'D', rightType:'P' },
  { category:'í•˜ë‚˜ë‹˜ ì¸ì‹ë°©ì‹', text:'ğŸ™Œ í•˜ë‚˜ë‹˜ê»˜ í—Œì‹ ì„ ê²°ë‹¨í•  ë•Œ, ì–´ë–¤ ë§ˆìŒì´ ì•ì„œëŠ”ê°€?',
    leftText:'í•˜ë‚˜ë‹˜ê»˜ ì‚¬ë‘ë°›ê³  ìˆë‹¤ëŠ” ê°ê²©ì´ í—Œì‹ ì˜ ì›ë™ë ¥ì´ë‹¤.', rightText:'í•˜ë‚˜ë‹˜ì˜ ëœ»ì— ìˆœì¢…í•˜ëŠ” ê²ƒì´ ë‹¹ì—°í•˜ë‹¤ëŠ” ì±…ì„ê°ì´ ì•ì„ ë‹¤.', leftType:'D', rightType:'P' },

  // ì‹ ì•™ìƒí™œ íŒ¨í„´ (O/F) â€” 5
  { category:'ì‹ ì•™ìƒí™œ íŒ¨í„´', text:'ğŸ“† ìˆ˜ë ¨íšŒ ì „ë‚  ë°¤, ë‹¹ì‹ ì€?',
    leftText:'ì§, ì¼ì •, ë§ì”€ ë‹¤ ì •ë¦¬í•˜ê³  ê¸°ë„ê¹Œì§€ ë§ˆì¹œ ìƒíƒœë‹¤.', rightText:'ë§ˆìŒ ê°€ëŠ” ëŒ€ë¡œ ë‚´ì¼ ì•„ì¹¨ì— ì§ ì‹¸ë„ ê´œì°®ë‹¤.', leftType:'O', rightType:'F' },
  { category:'ì‹ ì•™ìƒí™œ íŒ¨í„´', text:'ğŸ“– ì„±ê²½ ì½ê¸°ë¥¼ ì‹œì‘í•˜ë ¤ëŠ” ë‹¹ì‹ .',
    leftText:'ê³„íší‘œë¥¼ ì„¸ì›Œ í•˜ë£¨ ë¶„ëŸ‰ì„ ì§€í‚¤ë ¤ê³  ë…¸ë ¥í•˜ëŠ” í¸ì´ë‹¤.', rightText:'ë§ˆìŒì— ëŒë¦¬ëŠ” ë³¸ë¬¸ ìœ„ì£¼ë¡œ ììœ ë¡­ê²Œ ì½ëŠ” í¸ì´ë‹¤.', leftType:'O', rightType:'F' },
  { category:'ì‹ ì•™ìƒí™œ íŒ¨í„´', text:'ğŸ“ ê¸°ë„ì œëª©ì„ ê¸°ë¡í•˜ëŠ” ë°©ì‹ì€?',
    leftText:'ë‚ ì§œë³„ë¡œ ì •ë¦¬ëœ ë…¸íŠ¸ë‚˜ ì•±ì„ ì‚¬ìš©í•˜ëŠ” í¸ì´ë‹¤.', rightText:'ë– ì˜¤ë¥¼ ë•Œ ê°„ë‹¨íˆ ë©”ëª¨í•˜ëŠ” í¸ì´ë‹¤.', leftType:'O', rightType:'F' },
  { category:'ì‹ ì•™ìƒí™œ íŒ¨í„´', text:'â›ª ì‹ ì•™ìƒí™œì„ ì‹¤ì²œí•˜ëŠ” ë‚˜ë§Œì˜ ë°©ì‹ì€?',
    leftText:'ì‹ ì•™ìƒí™œì€ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.', rightText:'ì‹ ì•™ìƒí™œì€ íë¦„ì— ë”°ë¼ ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ì§€ëŠ” ê²ƒì´ ë” ì˜ë¯¸ ìˆë‹¤ê³  ìƒê°í•œë‹¤.', leftType:'O', rightType:'F' },
  { category:'ì‹ ì•™ìƒí™œ íŒ¨í„´', text:'ğŸ í—Œê¸ˆì´ë‚˜ ë´‰ì‚¬ë¥¼ í•  ë•Œì˜ ë‚˜ëŠ”?',
    leftText:'ë¯¸ë¦¬ ê³„íší•˜ê³  ì •í•´ë‘” ë°©ì‹ëŒ€ë¡œ ì •ê¸°ì ìœ¼ë¡œ ì‹¤ì²œí•œë‹¤.', rightText:'ë§ˆìŒì´ ê°ë™ë˜ì—ˆì„ ë•Œ ìë°œì ìœ¼ë¡œ ë“œë¦¬ê³  ì°¸ì—¬í•˜ëŠ” í¸ì´ë‹¤.', leftType:'O', rightType:'F' },
];

/* ===================== 2) ê²°ê³¼ ìœ í˜• ì‚¬ì „(16ì¢…) ===================== */
const resultTypes = {
  'REDO':{emoji:'ğŸ’–',nickname:'ì‚¬ë‘ ë„˜ì¹˜ëŠ” ê³µë™ì²´ ë¦¬ë”',
    description:'ê³µë™ì²´ ì†ì—ì„œ ì‚¬ë‘ê³¼ ê°ì •ìœ¼ë¡œ ì‹ ì•™ì„ í‘œí˜„í•˜ë©°, í•˜ë‚˜ë‹˜ê³¼ì˜ ì¹œë°€í•œ ê´€ê³„ë¥¼ í†µí•´ ì‚¶ì„ ê³„íší•˜ê³  ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê³µë™ì²´ í™œë™ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ê³  ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤.','ê°ì„±ì ì´ê³  ê²½í—˜ì„ ì¤‘ì‹œí•˜ë©°, ì°¬ì–‘ê³¼ ê¸°ë„ë¥¼ í†µí•´ ê¹Šì€ ê°ë™ì„ ë°›ìŠµë‹ˆë‹¤.','í•˜ë‚˜ë‹˜ì„ ì‚¬ë‘ì´ ë§ê³  ì¹œë°€í•œ ë¶„ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.','ì‹ ì•™ìƒí™œì„ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•©ë‹ˆë‹¤.']},
  'REDF':{emoji:'ğŸŒŠ',nickname:'ììœ ë¡œìš´ ì‚¬ë‘ì˜ íŒŒë„',
    description:'ê³µë™ì²´ ì†ì—ì„œ ì‚¬ë‘ì„ ë‚˜ëˆ„ê³  ê°ì •ì ìœ¼ë¡œ ì‹ ì•™ì„ í‘œí˜„í•˜ë©°, í•˜ë‚˜ë‹˜ê³¼ì˜ ì¹œë°€í•œ ê´€ê³„ ì†ì—ì„œ ììœ ë¡­ê²Œ í—Œì‹ í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê³µë™ì²´ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ìŠµë‹ˆë‹¤.','ê°ì„±Â·ê²½í—˜ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.','í•˜ë‚˜ë‹˜ì„ ì¹œë°€í•œ ë¶„ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.','ìë°œì ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ ì‹¤ì²œí•©ë‹ˆë‹¤.']},
  'REPO':{emoji:'ğŸŒˆ',nickname:'ê°ê²©ì˜ ë¬´ì§€ê°œ',
    description:'ê³µë™ì²´ ì•ˆì—ì„œ ê°ì •ì ìœ¼ë¡œ ì‹ ì•™ì„ í‘œí˜„í•˜ë©°, í•˜ë‚˜ë‹˜ì„ ì›ì¹™ ì¤‘ì‹¬ìœ¼ë¡œ ì¸ì‹í•˜ê³  ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê³µë™ì²´ì— ì ê·¹ì ì…ë‹ˆë‹¤.','ê²½í—˜ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.','í•˜ë‚˜ë‹˜ì„ ê³µì˜ì˜ í•˜ë‚˜ë‹˜ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.','ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•©ë‹ˆë‹¤.']},
  'REPF':{emoji:'ğŸŒ»',nickname:'ììœ ë¡œìš´ ê°ì„±ì˜ ê½ƒ',
    description:'ê³µë™ì²´ ì•ˆì—ì„œ ê°ì„±ì ìœ¼ë¡œ í‘œí˜„í•˜ê³  ì›ì¹™ì„ ì¤‘ì‹œí•˜ë˜ ìœ ì—°í•˜ê²Œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê³µë™ì²´ ì¤‘ì‹¬','ê°ì„±Â·ê²½í—˜ ì¤‘ì‹œ','ì›ì¹™ ì¸ì‹','ìë°œÂ·ìœ ì—° ì‹¤ì²œ']},
  'RWDO':{emoji:'ğŸ”',nickname:'íƒêµ¬í•˜ëŠ” ì§€ì‹ì˜ ìƒ˜',
    description:'ê´€ê³„ë¥¼ ì¤‘ì‹œí•˜ê³  ì´ì„±ì ìœ¼ë¡œ ì‹ ì•™ì„ í‘œí˜„í•˜ë©°, ì¹œë°€í•œ ê´€ê³„ë¥¼ í†µí•´ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ì§€ì  êµë¥˜ ì„ í˜¸','ë…¼ë¦¬ íƒêµ¬','í•˜ë‚˜ë‹˜ì„ ì¹œë°€í•œ ë¶„ìœ¼ë¡œ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'RWDF':{emoji:'ğŸŒ¬ï¸',nickname:'ê³ ìš”í•œ ì„±ì°°ì˜ ë°”ëŒ',
    description:'ê´€ê³„ë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ë©° ì´ì„±ì ìœ¼ë¡œ í‘œí˜„í•˜ê³ , ì¹œë°€í•œ ê´€ê³„ ì†ì—ì„œ ìœ ì—°í•˜ê²Œ í—Œì‹ í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê´€ê³„ ì†Œì¤‘','ë…¼ë¦¬ íƒêµ¬','ì¹œë°€ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
  'RWPO':{emoji:'ğŸ’',nickname:'ì§„ë¦¬ì˜ ë³´ì„',
    description:'ê´€ê³„ë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ë©° ì´ì„±ì ìœ¼ë¡œ ì´í•´í•˜ê³ , ì›ì¹™ ì¤‘ì‹¬ìœ¼ë¡œ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê´€ê³„ ì†Œì¤‘','ì´ì„±ì  ì´í•´','ì›ì¹™ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'RWPF':{emoji:'ğŸŒŒ',nickname:'ì´ì„±ì ì¸ ììœ ì˜ ìš°ì£¼',
    description:'ê´€ê³„ë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ë©° ì´ì„±ì ìœ¼ë¡œ ì´í•´í•˜ê³ , ì›ì¹™ì„ ì¤‘ì‹œí•˜ë˜ ìœ ì—°í•˜ê²Œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê´€ê³„ ì†Œì¤‘','ì´ì„±ì  ì´í•´','ì›ì¹™ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
  'SEDO':{emoji:'ğŸ’¡',nickname:'ê°ì„±ì ì¸ ì§€í˜œì˜ ë“±ëŒ€',
    description:'ê°œì¸ ë¬µìƒê³¼ ê°ì •ì  ê²½í—˜ì„ ì¤‘ì‹œí•˜ë©°, ì¹œë°€í•œ ê´€ê³„ë¥¼ í†µí•´ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ ê¹ŠìŒ','ê°ì„±Â·ê²½í—˜ ì¤‘ì‹œ','ì¹œë°€ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'SEDF':{emoji:'ğŸŒ¸',nickname:'ê³ ìš”í•œ ê°ì„±ì˜ ìƒ˜',
    description:'ê°œì¸ ë¬µìƒê³¼ ê°ì„±ì  ê²½í—˜ì„ ì¤‘ì‹œí•˜ë©°, ì¹œë°€í•œ ê´€ê³„ ì†ì—ì„œ ìœ ì—°í•˜ê²Œ í—Œì‹ í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ê°ì„±Â·ê²½í—˜','ì¹œë°€ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
  'SEPO':{emoji:'ğŸ”¥',nickname:'ë‚´ë©´ì˜ ì—´ì •ê°€',
    description:'ê°œì¸ ë¬µìƒì„ ì¤‘ì‹œí•˜ë©°, í•˜ë‚˜ë‹˜ì„ ì›ì¹™ ì¤‘ì‹¬ìœ¼ë¡œ ì¸ì‹í•˜ê³  ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ê°ì„± ì¤‘ì‹¬ í‘œí˜„','ì›ì¹™ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'SEPF':{emoji:'ğŸ•Šï¸',nickname:'ê³ ìš”í•œ ì˜í˜¼ì˜ íƒí—˜ê°€',
    description:'ê°œì¸ ë¬µìƒì„ ì¤‘ì‹œí•˜ë©°, ì›ì¹™ì„ ì¸ì‹í•˜ë˜ ìœ ì—°í•˜ê²Œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ê°ì„± ì¤‘ì‹¬ í‘œí˜„','ì›ì¹™ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
  'SWDO':{emoji:'ğŸ“š',nickname:'ë§ì”€ ì¤‘ì‹¬ì˜ ì‹¤ì²œê°€',
    description:'ê°œì¸ ë¬µìƒê³¼ ì´ì„±ì  ì´í•´ë¥¼ í†µí•´, ì¹œë°€í•œ ê´€ê³„ë¡œ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ë…¼ë¦¬ íƒêµ¬','ì¹œë°€ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'SWDF':{emoji:'ğŸŒ³',nickname:'ê³ ìš”í•œ ë¯¿ìŒì˜ ë‚˜ë¬´',
    description:'ê°œì¸ ë¬µìƒê³¼ ì´ì„±ì  ì´í•´ë¥¼ í†µí•´, ì¹œë°€í•œ ê´€ê³„ ì† ìœ ì—°í•œ ì‹¤ì²œì„ ì¶”êµ¬í•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ë…¼ë¦¬ íƒêµ¬','ì¹œë°€ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
  'SWPO':{emoji:'ğŸŒŸ',nickname:'ë¹›ë‚˜ëŠ” ìˆœì¢…ì˜ ë³„',
    description:'ê°œì¸ ë¬µìƒê³¼ ì´ì„±ì  ì´í•´ë¥¼ í†µí•´, ì›ì¹™ ì¤‘ì‹¬ìœ¼ë¡œ ê³„íšì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ë…¼ë¦¬ íƒêµ¬','ì›ì¹™ ì¸ì‹','ê³„íšì  ì‹¤ì²œ']},
  'SWPF':{emoji:'â›°ï¸',nickname:'í”ë“¤ë¦¼ ì—†ëŠ” ì‚°',
    description:'ê°œì¸ ë¬µìƒê³¼ ì´ì„±ì  ì´í•´ë¥¼ í†µí•´, ì›ì¹™ì„ ì¤‘ì‹œí•˜ë˜ ìœ ì—°í•˜ê²Œ ì‹¤ì²œí•˜ëŠ” ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê°œì¸ êµì œ','ë…¼ë¦¬ íƒêµ¬','ì›ì¹™ ì¸ì‹','ìœ ì—° ì‹¤ì²œ']},
};

/* ===================== 3) ì „ì—­ ìƒíƒœ ===================== */
let questions = [];                 // ì„ì¸ ì§ˆë¬¸
let currentQuestionIndex = 0;
let userAnswers = [];               // ê° ë¬¸í•­ ì„ íƒ(0~3)
let netScores = { RS:0, EW:0, DP:0, OF:0 }; // ëˆ„ì  ê°€ì¤‘ì¹˜(-10~+10)

/* ===================== 4) ìœ í‹¸: ë™ì¼ ì¹´í…Œê³ ë¦¬ ì—°ì† ì—†ì´ ì„ê¸° ===================== */
function noAdjacency(arr){
  for(let i=1;i<arr.length;i++){
    if(arr[i].category === arr[i-1].category) return false;
  }
  return true;
}
function fisherYates(a){
  const arr=a.slice();
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function greedyDistribute(a){
  const groups={};
  a.forEach(q=>{(groups[q.category]??=[]).push(q)});
  Object.values(groups).forEach(g=>g.sort(()=>Math.random()-0.5));
  const cats=Object.keys(groups);
  const res=[];
  let prev=null;
  for(let k=0;k<a.length;k++){
    const candidates=cats.filter(c=>groups[c].length>0 && c!==prev)
                         .sort((c1,c2)=>groups[c2].length - groups[c1].length);
    let pick=null;
    if(candidates.length>0){ pick=candidates[0]; }
    else{
      // ë¶ˆê°€í”¼í•˜ê²Œ ê°™ì€ ì¹´í…Œê³ ë¦¬ë©´ ì´í›„ ìœ„ì¹˜ì™€ ìŠ¤ì™‘ ì‹œë„
      pick=cats.find(c=>groups[c].length>0);
    }
    res.push(groups[pick].pop());
    prev=pick;
  }
  return res;
}
function shuffleNoAdjacency(a){
  // 1) ì‹œë„í˜•
  for(let t=0;t<1200;t++){
    const s=fisherYates(a);
    if(noAdjacency(s)) return s;
  }
  // 2) ê·¸ë¦¬ë””
  const g=greedyDistribute(a);
  if(noAdjacency(g)) return g;
  // 3) ë§ˆì§€ë§‰ ë³´ì • ìŠ¤ì™‘
  for(let i=1;i<g.length;i++){
    if(g[i].category===g[i-1].category){
      const j=g.findIndex((x,idx)=> idx!==i && idx!==i-1 && x.category!==g[i].category);
      if(j>-1){ [g[i],g[j]]=[g[j],g[i]]; }
    }
  }
  return g;
}

/* ===================== 5) ì‹œì‘/ë Œë”/ì´ë™ ===================== */
function startTest(){
  document.getElementById('startScreen').style.display='none';
  document.getElementById('testScreen').style.display='flex';

  questions = shuffleNoAdjacency(baseQuestions);
  currentQuestionIndex = 0;
  userAnswers = new Array(questions.length).fill(null);
  netScores = { RS:0, EW:0, DP:0, OF:0 };

  renderQuestion();
  updateProgress();
}

function axisKeyOf(q){
  const pair = q.leftType + q.rightType; // ì˜ˆ: 'RS', 'EW', ...
  if(pair.includes('R') && pair.includes('S')) return 'RS';
  if(pair.includes('E') && pair.includes('W')) return 'EW';
  if(pair.includes('D') && pair.includes('P')) return 'DP';
  if(pair.includes('O') && pair.includes('F')) return 'OF';
  return null;
}

// 4ì  ì²™ë„ ì¸ë±ìŠ¤ë³„ ê°€ì¤‘ì¹˜: [ì™¼ê°•, ì™¼ì•½, ì˜¤ë¥¸ì•½, ì˜¤ë¥¸ê°•] -> [+2,+1,-1,-2]
const weightByIndex = [ +2, +1, -1, -2 ];

function renderQuestion(){
  const q = questions[currentQuestionIndex];
  const qNum = document.getElementById('questionNumber');
  const qText= document.getElementById('questionText');
  const cont = document.getElementById('optionsContainer');

  qNum.textContent = `${currentQuestionIndex+1} / ${questions.length}`;
  qText.textContent = q.text;
  cont.innerHTML = '';

  const leftTextWrapper = document.createElement('div');
  leftTextWrapper.className = 'option-text-wrapper left-text';
  leftTextWrapper.innerHTML = `<p>${q.leftText}</p>`;
  cont.appendChild(leftTextWrapper);

  const circleWrapper = document.createElement('div');
  circleWrapper.className = 'circle-wrapper';

  const mobileDisplay = document.getElementById('mobileTextDisplay');
  const mobileLeftText = document.getElementById('mobileLeftText');
  const mobileRightText= document.getElementById('mobileRightText');
  if(window.innerWidth <= 767){
    mobileDisplay.style.display='block';
    mobileLeftText.textContent=q.leftText;
    mobileRightText.textContent=q.rightText;
  } else {
    mobileDisplay.style.display='none';
  }

  // ë„¤ ê°œì˜ ì›í˜• ë²„íŠ¼ ìƒì„±
  const optionMeta = [
    { label:'ì™¼ìª½(ê°•)', size:'large'  }, // index 0
    { label:'ì™¼ìª½(ì•½)', size:'small'  }, // index 1
    { label:'ì˜¤ë¥¸(ì•½)', size:'small'  }, // index 2
    { label:'ì˜¤ë¥¸(ê°•)', size:'large'  }, // index 3
  ];

  optionMeta.forEach((m,idx)=>{
    const input = document.createElement('input');
    input.type='radio';
    input.name=`question-${currentQuestionIndex}`;
    input.id=`q${currentQuestionIndex}-opt${idx}`;

    const wrap = document.createElement('label'); // í´ë¦­ì˜ì—­ í™•ì¥
    wrap.htmlFor = input.id;

    const cont2 = document.createElement('div');
    cont2.className='option-circle-container';

    const circle = document.createElement('div');
    circle.className=`option-circle ${m.size}`;

    cont2.appendChild(circle);
    wrap.appendChild(cont2);

    // ì„ íƒ ì´ë²¤íŠ¸
    input.addEventListener('change', ()=>{
      userAnswers[currentQuestionIndex] = idx;
      updateSelectedTextHighlight(idx);
      document.getElementById('nextBtn').disabled = false;
    });

    circleWrapper.appendChild(input);
    circleWrapper.appendChild(wrap);
  });
  cont.appendChild(circleWrapper);

  const rightTextWrapper = document.createElement('div');
  rightTextWrapper.className = 'option-text-wrapper right-text';
  rightTextWrapper.innerHTML = `<p>${q.rightText}</p>`;
  cont.appendChild(rightTextWrapper);

  // ì´ì „ ì‘ë‹µ ë³µì›
  const saved = userAnswers[currentQuestionIndex];
  document.getElementById('nextBtn').disabled = (saved===null);
  if(saved!==null){
    const input = document.getElementById(`q${currentQuestionIndex}-opt${saved}`);
    if(input){ input.checked = true; updateSelectedTextHighlight(saved); }
  }

  // ì´ì „ ë²„íŠ¼ ìƒíƒœ
  document.getElementById('prevBtn').disabled = (currentQuestionIndex===0);
}

function updateSelectedTextHighlight(selectedIdx){
  const leftText = document.querySelector('.option-text-wrapper.left-text');
  const rightText= document.querySelector('.option-text-wrapper.right-text');
  leftText.classList.remove('selected-left');
  rightText.classList.remove('selected-right');
  if(selectedIdx===0 || selectedIdx===1) leftText.classList.add('selected-left');
  if(selectedIdx===2 || selectedIdx===3) rightText.classList.add('selected-right');
}

function goPrev(){
  if(currentQuestionIndex>0){
    currentQuestionIndex--;
    renderQuestion();
    updateProgress();
  }
}
function goNext(){
  if(userAnswers[currentQuestionIndex]===null) return;

  if(currentQuestionIndex < questions.length-1){
    currentQuestionIndex++;
    renderQuestion();
    updateProgress();
  }else{
    // ë§ˆì§€ë§‰ -> ê²°ê³¼ ê³„ì‚°
    calculateScores();
    showResult();
  }
}

function updateProgress(){
  const progress = ((currentQuestionIndex) / questions.length)*100;
  document.getElementById('progressBar').style.width = `${progress}%`;
}

/* ===================== 6) ì ìˆ˜ ê³„ì‚°/ê²°ê³¼ ë„ì¶œ ===================== */
function calculateScores(){
  netScores = { RS:0, EW:0, DP:0, OF:0 };
  for(let i=0;i<questions.length;i++){
    const q = questions[i];
    const idx = userAnswers[i];
    if(idx===null) continue;
    const w = weightByIndex[idx];
    const axis = axisKeyOf(q); // 'RS' ë“±
    if(!axis) continue;

    // ì™¼ìª½ íƒ€ì…ì´ë©´ +, ì˜¤ë¥¸ìª½ íƒ€ì…ì´ë©´ -
    // ì´ë¯¸ weightByIndexê°€ [+2,+1,-1,-2]ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ í•©ì‚°
    netScores[axis] += w;
  }
}

function letterForAxis(axisKey, value){
  // value>0 -> ì™¼ìª½ ê¸€ì, value<0 -> ì˜¤ë¥¸ìª½ ê¸€ì
  if(axisKey==='RS') return value>=0 ? 'R' : 'S';
  if(axisKey==='EW') return value>=0 ? 'E' : 'W';
  if(axisKey==='DP') return value>=0 ? 'D' : 'P';
  if(axisKey==='OF') return value>=0 ? 'O' : 'F';
  return '?';
}

function showResult(){
  // ì§„í–‰ë°” ê°€ë“
  document.getElementById('progressBar').style.width='100%';
  document.getElementById('testScreen').style.display='none';
  document.getElementById('resultScreen').style.display='block';

  // ê° ì¶• ìµœëŒ€ê°’ = ë¬¸í•­ìˆ˜(ì¶•ë³„ 5ë¬¸í•­)*2
  const maxPerAxis = 5*2; // 10
  const code = letterForAxis('RS',netScores.RS) + letterForAxis('EW',netScores.EW)
              + letterForAxis('DP',netScores.DP) + letterForAxis('OF',netScores.OF);

  const info = resultTypes[code] ?? {
    emoji:'âœ¨', nickname:'SCTI ìœ í˜•',
    description:'ê° ì¶•ì˜ ìš°ì„¸ ë°©í–¥ì„ ë°”íƒ•ìœ¼ë¡œ ë„ì¶œëœ ìœ í˜•ì…ë‹ˆë‹¤.',
    traits:['ê´€ê³„/ê°œì¸, ê°ì„±/ì´ì„±, ì‚¬ë‘/ì›ì¹™, ê³„íš/ìœ ì—°ì˜ ê· í˜•ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.']
  };

  // í—¤ë”
  document.getElementById('resultEmoji').textContent = info.emoji;
  document.getElementById('resultCode').textContent  = code;
  document.getElementById('resultNickname').textContent = info.nickname;
  document.getElementById('resultDescription').textContent = info.description;

  // íŠ¹ì§•
  const traitUL = document.getElementById('traitList');
  traitUL.innerHTML = '';
  info.traits.forEach(t=>{
    const li=document.createElement('li');
    li.textContent=t;
    traitUL.appendChild(li);
  });

  // ìƒì„¸ ê·¸ë˜í”„ DOM
  renderScoreBars('scoresArea', netScores, maxPerAxis);

  // ë‹¤ìš´ë¡œë“œ ì¹´ë“œ ë°ì´í„° ë™ê¸°í™”
  syncImageCard(code, info, netScores, maxPerAxis);
}

function renderScoreBars(containerId, scores, maxPerAxis){
  const area = document.getElementById(containerId);
  area.innerHTML='';
  const rows = [
    { key:'RS', left:'ê´€ê³„ì§€í–¥ R', right:'ê°œì¸ì§€í–¥ S', value:scores.RS },
    { key:'EW', left:'ê°ì„±í‘œí˜„ E', right:'ì´ì„±í‘œí˜„ W', value:scores.EW },
    { key:'DP', left:'ì‚¬ë‘ì¤‘ì‹¬ D', right:'ì›ì¹™ì¤‘ì‹¬ P', value:scores.DP },
    { key:'OF', left:'ê³„íšì¤‘ì‹¬ O', right:'ìœ ì—°ì¤‘ì‹¬ F', value:scores.OF },
  ];
  rows.forEach(r=>{
    const row = document.createElement('div');
    row.className='score-row';

    const labels = document.createElement('div');
    labels.className='score-labels';
    const l = document.createElement('div'); l.className='score-label'; l.textContent=r.left;
    const m = document.createElement('div'); m.className='score-label'; m.textContent = `${r.value}`;
    const rt= document.createElement('div'); rt.className='score-label'; rt.textContent=r.right;
    // í™œì„±í™” í‘œì‹œ
    if(r.value>0) l.classList.add('active');
    if(r.value<0) rt.classList.add('active');

    labels.appendChild(l); labels.appendChild(m); labels.appendChild(rt);

    const bar = document.createElement('div'); bar.className='score-bar-container';
    const center = document.createElement('div'); center.className='score-bar-center';
    const fillL = document.createElement('div'); fillL.className='score-fill-left';
    const fillR = document.createElement('div'); fillR.className='score-fill-right';

    const pct = Math.min(1, Math.abs(r.value)/maxPerAxis) * 50; // í•œìª½ ìµœëŒ€ 50%
    fillL.style.width = (r.value>0)? `${pct}%` : '0%';
    fillR.style.width = (r.value<0)? `${pct}%` : '0%';

    bar.appendChild(fillL); bar.appendChild(center); bar.appendChild(fillR);

    row.appendChild(labels);
    row.appendChild(bar);
    area.appendChild(row);
  });
}

/* ===================== 7) ê²°ê³¼ ì´ë¯¸ì§€(ê·¸ë˜í”„ í¬í•¨) ì €ì¥ ===================== */
function syncImageCard(code, info, scores, maxPerAxis){
  document.getElementById('imgEmoji').textContent = info.emoji;
  document.getElementById('imgCode').textContent  = code;
  document.getElementById('imgNickname').textContent = info.nickname;
  document.getElementById('imgDescription').textContent = info.description;

  // ë¯¸ë‹ˆ ê·¸ë˜í”„ ë Œë”
  const g = document.getElementById('imgGraph');
  g.innerHTML = '';
  // ë™ì¼í•œ êµ¬ì„± ì‚¬ìš©
  const temp = document.createElement('div');
  temp.id = 'imgGraphInner';
  g.appendChild(temp);
  renderScoreBars('imgGraphInner', scores, maxPerAxis);

  // íŠ¹ì§•
  const ul = document.getElementById('imgTraits');
  ul.innerHTML='';
  (info.traits||[]).forEach(t=>{
    const li=document.createElement('li'); li.textContent=t; ul.appendChild(li);
  });
}

async function downloadResultImage(){
  const card = document.getElementById('imageCard');
  card.style.display='block'; // í™”ë©´ ë°– ê³ ì • ìœ„ì¹˜

  // ì•½ê°„ì˜ ë Œë”ë§ ì—¬ìœ 
  await new Promise(r=>setTimeout(r, 150));

  const canvas = await html2canvas(card, {useCORS:true, backgroundColor:'#ffffff', scale:2});
  const dataURL = canvas.toDataURL('image/png');

  const a = document.createElement('a');
  a.href = dataURL;
  a.download = `SCTI_result_${new Date().toISOString().slice(0,10)}.png`;
  document.body.appendChild(a);
  a.click();
  a.remove();

  card.style.display='none';
}

/* ===================== 8) ì¬ì‹œì‘ ===================== */
function restart(){
  document.getElementById('resultScreen').style.display='none';
  document.getElementById('startScreen').style.display='flex';
}

/* ===================== 9) ì´ˆê¸° ì§„ì…ì‹œ ë²„íŠ¼ ë¹„í™œì„±í™” ì•ˆì „ì¥ì¹˜ ===================== */
window.addEventListener('load', ()=>{
  document.getElementById('nextBtn').disabled = true;
});
</script>
</body>
</html>
